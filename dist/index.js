var Tachidoku=function(exports){"use strict";var MangaViewer=(X=>(X[X.Default=0]="Default",X[X.RTL=1]="RTL",X[X.LTR=2]="LTR",X[X.Vertical=3]="Vertical",X[X.Scroll=4]="Scroll",X))(MangaViewer||{}),MangaStatus=(X=>(X[X.Unknown=0]="Unknown",X[X.Ongoing=1]="Ongoing",X[X.Completed=2]="Completed",X[X.Cancelled=3]="Cancelled",X[X.Hiatus=4]="Hiatus",X))(MangaStatus||{});class Converter{constructor(){this.mangaViewer={1:MangaViewer.LTR,2:MangaViewer.RTL,3:MangaViewer.Vertical,4:MangaViewer.Scroll,5:MangaViewer.Scroll},this.mangaStatus={0:MangaStatus.Unknown,1:MangaStatus.Ongoing,2:MangaStatus.Completed,3:MangaStatus.Unknown,4:MangaStatus.Completed,5:MangaStatus.Cancelled,6:MangaStatus.Hiatus}}parseMangaObject(a){var te,ne,ie,Q,q;return{id:this.parseMangaId(a.url),lastUpdate:0,author:(te=a.author)!=null?te:"",url:this.parseMangaUrl(a.url),nsfw:0,tags:a.genre,title:a.title,sourceId:this.aidokuSourceId,desc:(ne=a.description)!=null?ne:"",cover:(ie=a.thumbnailUrl)!=null?ie:"",viewer:(Q=this.mangaViewer[a.viewer])!=null?Q:MangaViewer.Default,status:(q=this.mangaStatus[a.status])!=null?q:MangaStatus.Unknown}}parseChapterObject(a,te){var ne;return{sourceId:this.aidokuSourceId,mangaId:this.parseMangaId(a.url),lang:this.lang,id:this.parseChapterId(te.url),scanlator:(ne=te.scanlator)!=null?ne:"",dateUploaded:te.dateUpload.divide(1e3).toNumber(),chapter:te.chapterNumber,sourceOrder:te.sourceOrder}}}class e$2 extends Converter{constructor(a,te){super(),this.tachiyomiSourceId=a,this.lang=te,this.aidokuSourceId="multi.mangadex"}parseMangaId(a){return a.replace("/manga/","")}parseChapterId(a){return a.replace("/chapter/","")}parseMangaUrl(a){return`https://mangadex.org${a}`}parseMangaObject(a){let te=super.parseMangaObject(a);return te.tags=te.tags.map(ne=>{var ie,Q;return(Q=(ie=ne.split(":")[1])==null?void 0:ie.trim())!=null?Q:ne}),te}}const g$1=new e$2("2499283573021220255","en"),c=new e$2("3339599426223341161","ar"),M=new e$2("4150470519566206911","bn"),v=new e$2("5463447640980279236","bg"),x$1=new e$2("1347402746269051958","my"),C=new e$2("5860541308324630662","ca"),D=new e$2("5148895169070562838","zh-Hans"),w=new e$2("1493666528525752601","zh-Hant"),i$1=new e$2("3578612018159256808","cs"),p=new e$2("425785191804166217","da"),u=new e$2("6750440049024086587","nl"),d$1=new e$2("8578871918181236609","fil"),l=new e$2("8254121249433835847","fi"),m$2=new e$2("4505830566611664829","fr"),h=new e$2("5098537545549490547","de"),H=new e$2("3260701926561129943","el"),I=new e$2("1424273154577029558","he"),S$1=new e$2("6840513937945146538","hi"),f$1=new e$2("4284949320785450865","hu"),A=new e$2("3807502156582598786","id"),N=new e$2("1952071260038453057","it"),E=new e$2("1411768577036936240","ja"),R=new e$2("3285208643537017688","ko"),T=new e$2("764587568075398530","la"),b=new e$2("737986167355114438","lt"),k=new e$2("1471784905273036181","ms"),B=new e$2("5967745367608513818","mn"),L=new e$2("954368055061084457","ne"),O=new e$2("4872213291993424667","no"),F=new e$2("3781216447842245147","fa"),U=new e$2("8033579885162383068","pl"),_=new e$2("2655149515337070132","pt-BR"),j=new e$2("5189216366882819742","pt"),P=new e$2("4774459486579224459","ro"),y=new e$2("2098905203823335614","ru"),z=new e$2("4710920497926776490","sh"),K=new e$2("4938773340256184018","es-419"),V=new e$2("6400665728063187402","es"),Z=new e$2("1145824452519314725","sv"),G=new e$2("1713554459881080228","th"),J=new e$2("3846770256925560569","tr"),Y=new e$2("5779037855201976894","uk"),$=new e$2("9194073792736219759","vi");var r$1=[g$1,c,M,v,x$1,C,D,w,i$1,p,u,d$1,l,m$2,h,H,I,S$1,f$1,A,N,E,R,T,b,k,B,L,O,F,U,_,j,P,y,z,K,V,Z,G,J,Y,$];class r extends Converter{constructor(a,te){super(),this.baseUrl=a,this.tachiyomiSourceId=te,this.aidokuSourceId="en.nepnep",this.lang="en"}parseMangaId(a){return a.replace("/manga/","")}parseChapterId(a){return a.replace("/read-online/","")}parseMangaUrl(a){return`${this.baseUrl}${a}`}}var o$1=[new r("https://mangasee123.com","9"),new r("https://manga4life.com","7798162483793432927")];class t$2 extends Converter{parseMangaId(a){return this.parseMangaUrl(a)}parseChapterId(a){return this.parseMangaUrl(a)}}class s$1 extends t$2{constructor(){super(...arguments),this.baseUrl="https://m.mangabat.com",this.tachiyomiSourceId="4215511432986138970",this.aidokuSourceId="en.mangabat",this.lang="en"}parseMangaUrl(a){return a.replace("https://readmangabat.com","https://m.mangabat.com")}}class o extends t$2{constructor(){super(...arguments),this.baseUrl="https://manganato.com",this.tachiyomiSourceId="1024627298672457456",this.aidokuSourceId="en.manganato",this.lang="en"}parseMangaUrl(a){return a.replace("https://readmanganato.com","https://manganato.com")}}var e$1=[new o,new s$1];class s extends Converter{constructor(a,te,ne,ie){super(),this.baseUrl=a,this.lang=te,this.tachiyomiSourceId=ne,this.aidokuSourceId=ie}parseMangaId(a){return this.parseMangaUrl(a)}parseChapterId(a){return this.parseMangaUrl(a)}parseMangaUrl(a){return`${this.baseUrl}${a}`}}var t$1=[new s("https://readkomik.com","en","4894958130777364576","en.readkomik"),new s("https://alpha-scans.org","en","4142958065526725213","en.alphascans"),new s("https://kumascans.com","en","4949888651444819799","en.kumascans"),new s("https://www.asurascans.com","en","6247824327199706550","multi.asurascans"),new s("https://www.asurascans.com","tr","7963074674054946733","multi.asurascans")];class e extends Converter{constructor(a,te,ne,ie,Q="manga"){super(),this.baseUrl=a,this.lang=te,this.tachiyomiSourceId=ne,this.aidokuSourceId=ie,this.sourcePath=Q}parseMangaId(a){return a.replace(`/${this.sourcePath}/`,"").replace(/\/$/,"")}parseChapterId(a){return a.replace(`/${this.sourcePath}/`,"")}parseMangaUrl(a){return`${this.baseUrl}${a}`}}var m$1=[new e("https://coloredmanga.com","en","8808685646100968349","en.coloredmanga"),new e("https://hentaicb.top","vi","823638192569572166","vi.hentaicube"),new e("https://lilymanga.com","en","4480996639887718467","en.lilymanga","ys"),new e("https://mangatx.com","en","3274683761704614629","en.mangatx"),new e("https://manhuaplus.com","en","9030178752551947945","en.manhuaplus"),new e("https://reaperscans.com","en","5177220001642863679","en.reaperscans","series"),new e("https://reset-scans.com","en","8894279497795073184","en.resetscans"),new e("https://toonily.com","en","5190569675461947007","en.toonily","webtoon")],f=[...r$1,...o$1,...e$1,...t$1,...m$1],commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(X){return X&&X.__esModule&&Object.prototype.hasOwnProperty.call(X,"default")?X.default:X}var light={exports:{}},indexLight={exports:{}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=X;function X(a,te){for(var ne=new Array(arguments.length-1),ie=0,Q=2,q=!0;Q<arguments.length;)ne[ie++]=arguments[Q++];return new Promise(function(re,ee){ne[ie]=function(se){if(q)if(q=!1,se)ee(se);else{for(var ue=new Array(arguments.length-1),ae=0;ae<ue.length;)ue[ae++]=arguments[ae];re.apply(null,ue)}};try{a.apply(te||null,ne)}catch(oe){q&&(q=!1,ee(oe))}})}return aspromise}var base64$1={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(X){var a=X;a.length=function(W){var re=W.length;if(!re)return 0;for(var ee=0;--re%4>1&&W.charAt(re)==="=";)++ee;return Math.ceil(W.length*3)/4-ee};for(var te=new Array(64),ne=new Array(123),ie=0;ie<64;)ne[te[ie]=ie<26?ie+65:ie<52?ie+71:ie<62?ie-4:ie-59|43]=ie++;a.encode=function(W,re,ee){for(var oe=null,se=[],ue=0,ae=0,fe;re<ee;){var he=W[re++];switch(ae){case 0:se[ue++]=te[he>>2],fe=(he&3)<<4,ae=1;break;case 1:se[ue++]=te[fe|he>>4],fe=(he&15)<<2,ae=2;break;case 2:se[ue++]=te[fe|he>>6],se[ue++]=te[he&63],ae=0;break}ue>8191&&((oe||(oe=[])).push(String.fromCharCode.apply(String,se)),ue=0)}return ae&&(se[ue++]=te[fe],se[ue++]=61,ae===1&&(se[ue++]=61)),oe?(ue&&oe.push(String.fromCharCode.apply(String,se.slice(0,ue))),oe.join("")):String.fromCharCode.apply(String,se.slice(0,ue))};var Q="invalid encoding";a.decode=function(W,re,ee){for(var oe=ee,se=0,ue,ae=0;ae<W.length;){var fe=W.charCodeAt(ae++);if(fe===61&&se>1)break;if((fe=ne[fe])===void 0)throw Error(Q);switch(se){case 0:ue=fe,se=1;break;case 1:re[ee++]=ue<<2|(fe&48)>>4,ue=fe,se=2;break;case 2:re[ee++]=(ue&15)<<4|(fe&60)>>2,ue=fe,se=3;break;case 3:re[ee++]=(ue&3)<<6|fe,se=0;break}}if(se===1)throw Error(Q);return ee-oe},a.test=function(W){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(W)}}(base64$1)),base64$1}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=X;function X(){this._listeners={}}return X.prototype.on=function(te,ne,ie){return(this._listeners[te]||(this._listeners[te]=[])).push({fn:ne,ctx:ie||this}),this},X.prototype.off=function(te,ne){if(te===void 0)this._listeners={};else if(ne===void 0)this._listeners[te]=[];else for(var ie=this._listeners[te],Q=0;Q<ie.length;)ie[Q].fn===ne?ie.splice(Q,1):++Q;return this},X.prototype.emit=function(te){var ne=this._listeners[te];if(ne){for(var ie=[],Q=1;Q<arguments.length;)ie.push(arguments[Q++]);for(Q=0;Q<ne.length;)ne[Q].fn.apply(ne[Q++].ctx,ie)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=X(X);function X(Q){return typeof Float32Array!="undefined"?function(){var q=new Float32Array([-0]),W=new Uint8Array(q.buffer),re=W[3]===128;function ee(ae,fe,he){q[0]=ae,fe[he]=W[0],fe[he+1]=W[1],fe[he+2]=W[2],fe[he+3]=W[3]}function oe(ae,fe,he){q[0]=ae,fe[he]=W[3],fe[he+1]=W[2],fe[he+2]=W[1],fe[he+3]=W[0]}Q.writeFloatLE=re?ee:oe,Q.writeFloatBE=re?oe:ee;function se(ae,fe){return W[0]=ae[fe],W[1]=ae[fe+1],W[2]=ae[fe+2],W[3]=ae[fe+3],q[0]}function ue(ae,fe){return W[3]=ae[fe],W[2]=ae[fe+1],W[1]=ae[fe+2],W[0]=ae[fe+3],q[0]}Q.readFloatLE=re?se:ue,Q.readFloatBE=re?ue:se}():function(){function q(re,ee,oe,se){var ue=ee<0?1:0;if(ue&&(ee=-ee),ee===0)re(1/ee>0?0:2147483648,oe,se);else if(isNaN(ee))re(2143289344,oe,se);else if(ee>34028234663852886e22)re((ue<<31|2139095040)>>>0,oe,se);else if(ee<11754943508222875e-54)re((ue<<31|Math.round(ee/1401298464324817e-60))>>>0,oe,se);else{var ae=Math.floor(Math.log(ee)/Math.LN2),fe=Math.round(ee*Math.pow(2,-ae)*8388608)&8388607;re((ue<<31|ae+127<<23|fe)>>>0,oe,se)}}Q.writeFloatLE=q.bind(null,a),Q.writeFloatBE=q.bind(null,te);function W(re,ee,oe){var se=re(ee,oe),ue=(se>>31)*2+1,ae=se>>>23&255,fe=se&8388607;return ae===255?fe?NaN:ue*(1/0):ae===0?ue*1401298464324817e-60*fe:ue*Math.pow(2,ae-150)*(fe+8388608)}Q.readFloatLE=W.bind(null,ne),Q.readFloatBE=W.bind(null,ie)}(),typeof Float64Array!="undefined"?function(){var q=new Float64Array([-0]),W=new Uint8Array(q.buffer),re=W[7]===128;function ee(ae,fe,he){q[0]=ae,fe[he]=W[0],fe[he+1]=W[1],fe[he+2]=W[2],fe[he+3]=W[3],fe[he+4]=W[4],fe[he+5]=W[5],fe[he+6]=W[6],fe[he+7]=W[7]}function oe(ae,fe,he){q[0]=ae,fe[he]=W[7],fe[he+1]=W[6],fe[he+2]=W[5],fe[he+3]=W[4],fe[he+4]=W[3],fe[he+5]=W[2],fe[he+6]=W[1],fe[he+7]=W[0]}Q.writeDoubleLE=re?ee:oe,Q.writeDoubleBE=re?oe:ee;function se(ae,fe){return W[0]=ae[fe],W[1]=ae[fe+1],W[2]=ae[fe+2],W[3]=ae[fe+3],W[4]=ae[fe+4],W[5]=ae[fe+5],W[6]=ae[fe+6],W[7]=ae[fe+7],q[0]}function ue(ae,fe){return W[7]=ae[fe],W[6]=ae[fe+1],W[5]=ae[fe+2],W[4]=ae[fe+3],W[3]=ae[fe+4],W[2]=ae[fe+5],W[1]=ae[fe+6],W[0]=ae[fe+7],q[0]}Q.readDoubleLE=re?se:ue,Q.readDoubleBE=re?ue:se}():function(){function q(re,ee,oe,se,ue,ae){var fe=se<0?1:0;if(fe&&(se=-se),se===0)re(0,ue,ae+ee),re(1/se>0?0:2147483648,ue,ae+oe);else if(isNaN(se))re(0,ue,ae+ee),re(2146959360,ue,ae+oe);else if(se>17976931348623157e292)re(0,ue,ae+ee),re((fe<<31|2146435072)>>>0,ue,ae+oe);else{var he;if(se<22250738585072014e-324)he=se/5e-324,re(he>>>0,ue,ae+ee),re((fe<<31|he/4294967296)>>>0,ue,ae+oe);else{var ge=Math.floor(Math.log(se)/Math.LN2);ge===1024&&(ge=1023),he=se*Math.pow(2,-ge),re(he*4503599627370496>>>0,ue,ae+ee),re((fe<<31|ge+1023<<20|he*1048576&1048575)>>>0,ue,ae+oe)}}}Q.writeDoubleLE=q.bind(null,a,0,4),Q.writeDoubleBE=q.bind(null,te,4,0);function W(re,ee,oe,se,ue){var ae=re(se,ue+ee),fe=re(se,ue+oe),he=(fe>>31)*2+1,ge=fe>>>20&2047,de=4294967296*(fe&1048575)+ae;return ge===2047?de?NaN:he*(1/0):ge===0?he*5e-324*de:he*Math.pow(2,ge-1075)*(de+4503599627370496)}Q.readDoubleLE=W.bind(null,ne,0,4),Q.readDoubleBE=W.bind(null,ie,4,0)}(),Q}function a(Q,q,W){q[W]=Q&255,q[W+1]=Q>>>8&255,q[W+2]=Q>>>16&255,q[W+3]=Q>>>24}function te(Q,q,W){q[W]=Q>>>24,q[W+1]=Q>>>16&255,q[W+2]=Q>>>8&255,q[W+3]=Q&255}function ne(Q,q){return(Q[q]|Q[q+1]<<8|Q[q+2]<<16|Q[q+3]<<24)>>>0}function ie(Q,q){return(Q[q]<<24|Q[q+1]<<16|Q[q+2]<<8|Q[q+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(X){}return null}return inquire_1}var utf8$2={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(X){var a=X;a.length=function(ne){for(var ie=0,Q=0,q=0;q<ne.length;++q)Q=ne.charCodeAt(q),Q<128?ie+=1:Q<2048?ie+=2:(Q&64512)===55296&&(ne.charCodeAt(q+1)&64512)===56320?(++q,ie+=4):ie+=3;return ie},a.read=function(ne,ie,Q){var q=Q-ie;if(q<1)return"";for(var W=null,re=[],ee=0,oe;ie<Q;)oe=ne[ie++],oe<128?re[ee++]=oe:oe>191&&oe<224?re[ee++]=(oe&31)<<6|ne[ie++]&63:oe>239&&oe<365?(oe=((oe&7)<<18|(ne[ie++]&63)<<12|(ne[ie++]&63)<<6|ne[ie++]&63)-65536,re[ee++]=55296+(oe>>10),re[ee++]=56320+(oe&1023)):re[ee++]=(oe&15)<<12|(ne[ie++]&63)<<6|ne[ie++]&63,ee>8191&&((W||(W=[])).push(String.fromCharCode.apply(String,re)),ee=0);return W?(ee&&W.push(String.fromCharCode.apply(String,re.slice(0,ee))),W.join("")):String.fromCharCode.apply(String,re.slice(0,ee))},a.write=function(ne,ie,Q){for(var q=Q,W,re,ee=0;ee<ne.length;++ee)W=ne.charCodeAt(ee),W<128?ie[Q++]=W:W<2048?(ie[Q++]=W>>6|192,ie[Q++]=W&63|128):(W&64512)===55296&&((re=ne.charCodeAt(ee+1))&64512)===56320?(W=65536+((W&1023)<<10)+(re&1023),++ee,ie[Q++]=W>>18|240,ie[Q++]=W>>12&63|128,ie[Q++]=W>>6&63|128,ie[Q++]=W&63|128):(ie[Q++]=W>>12|224,ie[Q++]=W>>6&63|128,ie[Q++]=W&63|128);return Q-q}}(utf8$2)),utf8$2}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=X;function X(a,te,ne){var ie=ne||8192,Q=ie>>>1,q=null,W=ie;return function(ee){if(ee<1||ee>Q)return a(ee);W+ee>ie&&(q=a(ie),W=0);var oe=te.call(q,W,W+=ee);return W&7&&(W=(W|7)+1),oe}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=a;var X=requireMinimal();function a(Q,q){this.lo=Q>>>0,this.hi=q>>>0}var te=a.zero=new a(0,0);te.toNumber=function(){return 0},te.zzEncode=te.zzDecode=function(){return this},te.length=function(){return 1};var ne=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(q){if(q===0)return te;var W=q<0;W&&(q=-q);var re=q>>>0,ee=(q-re)/4294967296>>>0;return W&&(ee=~ee>>>0,re=~re>>>0,++re>4294967295&&(re=0,++ee>4294967295&&(ee=0))),new a(re,ee)},a.from=function(q){if(typeof q=="number")return a.fromNumber(q);if(X.isString(q))if(X.Long)q=X.Long.fromString(q);else return a.fromNumber(parseInt(q,10));return q.low||q.high?new a(q.low>>>0,q.high>>>0):te},a.prototype.toNumber=function(q){if(!q&&this.hi>>>31){var W=~this.lo+1>>>0,re=~this.hi>>>0;return W||(re=re+1>>>0),-(W+re*4294967296)}return this.lo+this.hi*4294967296},a.prototype.toLong=function(q){return X.Long?new X.Long(this.lo|0,this.hi|0,Boolean(q)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(q)}};var ie=String.prototype.charCodeAt;return a.fromHash=function(q){return q===ne?te:new a((ie.call(q,0)|ie.call(q,1)<<8|ie.call(q,2)<<16|ie.call(q,3)<<24)>>>0,(ie.call(q,4)|ie.call(q,5)<<8|ie.call(q,6)<<16|ie.call(q,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var q=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^q)>>>0,this.lo=(this.lo<<1^q)>>>0,this},a.prototype.zzDecode=function(){var q=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^q)>>>0,this.hi=(this.hi>>>1^q)>>>0,this},a.prototype.length=function(){var q=this.lo,W=(this.lo>>>28|this.hi<<4)>>>0,re=this.hi>>>24;return re===0?W===0?q<16384?q<128?1:2:q<2097152?3:4:W<16384?W<128?5:6:W<2097152?7:8:re<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(X){var a=X;a.asPromise=requireAspromise(),a.base64=requireBase64(),a.EventEmitter=requireEventemitter(),a.float=requireFloat(),a.inquire=requireInquire(),a.utf8=requireUtf8(),a.pool=requirePool(),a.LongBits=requireLongbits(),a.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),a.global=a.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isInteger=Number.isInteger||function(Q){return typeof Q=="number"&&isFinite(Q)&&Math.floor(Q)===Q},a.isString=function(Q){return typeof Q=="string"||Q instanceof String},a.isObject=function(Q){return Q&&typeof Q=="object"},a.isset=a.isSet=function(Q,q){var W=Q[q];return W!=null&&Q.hasOwnProperty(q)?typeof W!="object"||(Array.isArray(W)?W.length:Object.keys(W).length)>0:!1},a.Buffer=function(){try{var ie=a.inquire("buffer").Buffer;return ie.prototype.utf8Write?ie:null}catch(Q){return null}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(Q){return typeof Q=="number"?a.Buffer?a._Buffer_allocUnsafe(Q):new a.Array(Q):a.Buffer?a._Buffer_from(Q):typeof Uint8Array=="undefined"?Q:new Uint8Array(Q)},a.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,a.Long=a.global.dcodeIO&&a.global.dcodeIO.Long||a.global.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(Q){return Q?a.LongBits.from(Q).toHash():a.LongBits.zeroHash},a.longFromHash=function(Q,q){var W=a.LongBits.fromHash(Q);return a.Long?a.Long.fromBits(W.lo,W.hi,q):W.toNumber(Boolean(q))};function te(ie,Q,q){for(var W=Object.keys(Q),re=0;re<W.length;++re)(ie[W[re]]===void 0||!q)&&(ie[W[re]]=Q[W[re]]);return ie}a.merge=te,a.lcFirst=function(Q){return Q.charAt(0).toLowerCase()+Q.substring(1)};function ne(ie){function Q(q,W){if(!(this instanceof Q))return new Q(q,W);Object.defineProperty(this,"message",{get:function(){return q}}),Error.captureStackTrace?Error.captureStackTrace(this,Q):Object.defineProperty(this,"stack",{value:new Error().stack||""}),W&&te(this,W)}return(Q.prototype=Object.create(Error.prototype)).constructor=Q,Object.defineProperty(Q.prototype,"name",{get:function(){return ie}}),Q.prototype.toString=function(){return this.name+": "+this.message},Q}a.newError=ne,a.ProtocolError=ne("ProtocolError"),a.oneOfGetter=function(Q){for(var q={},W=0;W<Q.length;++W)q[Q[W]]=1;return function(){for(var re=Object.keys(this),ee=re.length-1;ee>-1;--ee)if(q[re[ee]]===1&&this[re[ee]]!==void 0&&this[re[ee]]!==null)return re[ee]}},a.oneOfSetter=function(Q){return function(q){for(var W=0;W<Q.length;++W)Q[W]!==q&&delete this[Q[W]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var ie=a.Buffer;if(!ie){a._Buffer_from=a._Buffer_allocUnsafe=null;return}a._Buffer_from=ie.from!==Uint8Array.from&&ie.from||function(q,W){return new ie(q,W)},a._Buffer_allocUnsafe=ie.allocUnsafe||function(q){return new ie(q)}}}(minimal)),minimal}var writer=Writer$1,util$6=requireMinimal(),BufferWriter$1,LongBits$1=util$6.LongBits,base64=util$6.base64,utf8$1=util$6.utf8;function Op(X,a,te){this.fn=X,this.len=a,this.next=void 0,this.val=te}function noop(){}function State(X){this.head=X.head,this.tail=X.tail,this.len=X.len,this.next=X.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function X(){return util$6.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1(),Writer$1.alloc=function X(a){return new util$6.Array(a)},util$6.Array!==Array&&(Writer$1.alloc=util$6.pool(Writer$1.alloc,util$6.Array.prototype.subarray)),Writer$1.prototype._push=function X(a,te,ne){return this.tail=this.tail.next=new Op(a,te,ne),this.len+=te,this};function writeByte(X,a,te){a[te]=X&255}function writeVarint32(X,a,te){for(;X>127;)a[te++]=X&127|128,X>>>=7;a[te]=X}function VarintOp(X,a){this.len=X,this.next=void 0,this.val=a}VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function X(a){return this.len+=(this.tail=this.tail.next=new VarintOp((a=a>>>0)<128?1:a<16384?2:a<2097152?3:a<268435456?4:5,a)).len,this},Writer$1.prototype.int32=function X(a){return a<0?this._push(writeVarint64,10,LongBits$1.fromNumber(a)):this.uint32(a)},Writer$1.prototype.sint32=function X(a){return this.uint32((a<<1^a>>31)>>>0)};function writeVarint64(X,a,te){for(;X.hi;)a[te++]=X.lo&127|128,X.lo=(X.lo>>>7|X.hi<<25)>>>0,X.hi>>>=7;for(;X.lo>127;)a[te++]=X.lo&127|128,X.lo=X.lo>>>7;a[te++]=X.lo}Writer$1.prototype.uint64=function X(a){var te=LongBits$1.from(a);return this._push(writeVarint64,te.length(),te)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function X(a){var te=LongBits$1.from(a).zzEncode();return this._push(writeVarint64,te.length(),te)},Writer$1.prototype.bool=function X(a){return this._push(writeByte,1,a?1:0)};function writeFixed32(X,a,te){a[te]=X&255,a[te+1]=X>>>8&255,a[te+2]=X>>>16&255,a[te+3]=X>>>24}Writer$1.prototype.fixed32=function X(a){return this._push(writeFixed32,4,a>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function X(a){var te=LongBits$1.from(a);return this._push(writeFixed32,4,te.lo)._push(writeFixed32,4,te.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function X(a){return this._push(util$6.float.writeFloatLE,4,a)},Writer$1.prototype.double=function X(a){return this._push(util$6.float.writeDoubleLE,8,a)};var writeBytes=util$6.Array.prototype.set?function X(a,te,ne){te.set(a,ne)}:function X(a,te,ne){for(var ie=0;ie<a.length;++ie)te[ne+ie]=a[ie]};Writer$1.prototype.bytes=function X(a){var te=a.length>>>0;if(!te)return this._push(writeByte,1,0);if(util$6.isString(a)){var ne=Writer$1.alloc(te=base64.length(a));base64.decode(a,ne,0),a=ne}return this.uint32(te)._push(writeBytes,te,a)},Writer$1.prototype.string=function X(a){var te=utf8$1.length(a);return te?this.uint32(te)._push(utf8$1.write,te,a):this._push(writeByte,1,0)},Writer$1.prototype.fork=function X(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function X(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function X(){var a=this.head,te=this.tail,ne=this.len;return this.reset().uint32(ne),ne&&(this.tail.next=a.next,this.tail=te,this.len+=ne),this},Writer$1.prototype.finish=function X(){for(var a=this.head.next,te=this.constructor.alloc(this.len),ne=0;a;)a.fn(a.val,te,ne),ne+=a.len,a=a.next;return te},Writer$1._configure=function(X){BufferWriter$1=X,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$5=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$5._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$5.Buffer&&util$5.Buffer.prototype instanceof Uint8Array&&util$5.Buffer.prototype.set.name==="set"?function(a,te,ne){te.set(a,ne)}:function(a,te,ne){if(a.copy)a.copy(te,ne,0,a.length);else for(var ie=0;ie<a.length;)te[ne++]=a[ie++]}},BufferWriter.prototype.bytes=function X(a){util$5.isString(a)&&(a=util$5._Buffer_from(a,"base64"));var te=a.length>>>0;return this.uint32(te),te&&this._push(BufferWriter.writeBytesBuffer,te,a),this};function writeStringBuffer(X,a,te){X.length<40?util$5.utf8.write(X,a,te):a.utf8Write?a.utf8Write(X,te):a.write(X,te)}BufferWriter.prototype.string=function X(a){var te=util$5.Buffer.byteLength(a);return this.uint32(te),te&&this._push(writeStringBuffer,te,a),this},BufferWriter._configure();var reader=Reader$1,util$4=requireMinimal(),BufferReader$1,LongBits=util$4.LongBits,utf8=util$4.utf8;function indexOutOfRange(X,a){return RangeError("index out of range: "+X.pos+" + "+(a||1)+" > "+X.len)}function Reader$1(X){this.buf=X,this.pos=0,this.len=X.length}var create_array=typeof Uint8Array!="undefined"?function X(a){if(a instanceof Uint8Array||Array.isArray(a))return new Reader$1(a);throw Error("illegal buffer")}:function X(a){if(Array.isArray(a))return new Reader$1(a);throw Error("illegal buffer")},create=function X(){return util$4.Buffer?function(te){return(Reader$1.create=function(ie){return util$4.Buffer.isBuffer(ie)?new BufferReader$1(ie):create_array(ie)})(te)}:create_array};Reader$1.create=create(),Reader$1.prototype._slice=util$4.Array.prototype.subarray||util$4.Array.prototype.slice,Reader$1.prototype.uint32=function X(){var a=4294967295;return function(){if(a=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(a=(a|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(a=(a|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(a=(a|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(a=(a|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return a;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return a}}(),Reader$1.prototype.int32=function X(){return this.uint32()|0},Reader$1.prototype.sint32=function X(){var a=this.uint32();return a>>>1^-(a&1)|0};function readLongVarint(){var X=new LongBits(0,0),a=0;if(this.len-this.pos>4){for(;a<4;++a)if(X.lo=(X.lo|(this.buf[this.pos]&127)<<a*7)>>>0,this.buf[this.pos++]<128)return X;if(X.lo=(X.lo|(this.buf[this.pos]&127)<<28)>>>0,X.hi=(X.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return X;a=0}else{for(;a<3;++a){if(this.pos>=this.len)throw indexOutOfRange(this);if(X.lo=(X.lo|(this.buf[this.pos]&127)<<a*7)>>>0,this.buf[this.pos++]<128)return X}return X.lo=(X.lo|(this.buf[this.pos++]&127)<<a*7)>>>0,X}if(this.len-this.pos>4){for(;a<5;++a)if(X.hi=(X.hi|(this.buf[this.pos]&127)<<a*7+3)>>>0,this.buf[this.pos++]<128)return X}else for(;a<5;++a){if(this.pos>=this.len)throw indexOutOfRange(this);if(X.hi=(X.hi|(this.buf[this.pos]&127)<<a*7+3)>>>0,this.buf[this.pos++]<128)return X}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function X(){return this.uint32()!==0};function readFixed32_end(X,a){return(X[a-4]|X[a-3]<<8|X[a-2]<<16|X[a-1]<<24)>>>0}Reader$1.prototype.fixed32=function X(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function X(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function X(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var a=util$4.float.readFloatLE(this.buf,this.pos);return this.pos+=4,a},Reader$1.prototype.double=function X(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var a=util$4.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,a},Reader$1.prototype.bytes=function X(){var a=this.uint32(),te=this.pos,ne=this.pos+a;if(ne>this.len)throw indexOutOfRange(this,a);return this.pos+=a,Array.isArray(this.buf)?this.buf.slice(te,ne):te===ne?new this.buf.constructor(0):this._slice.call(this.buf,te,ne)},Reader$1.prototype.string=function X(){var a=this.bytes();return utf8.read(a,0,a.length)},Reader$1.prototype.skip=function X(a){if(typeof a=="number"){if(this.pos+a>this.len)throw indexOutOfRange(this,a);this.pos+=a}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this},Reader$1.prototype.skipType=function(X){switch(X){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(X=this.uint32()&7)!==4;)this.skipType(X);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+X+" at offset "+this.pos)}return this},Reader$1._configure=function(X){BufferReader$1=X,Reader$1.create=create(),BufferReader$1._configure();var a=util$4.Long?"toLong":"toNumber";util$4.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[a](!1)},uint64:function(){return readLongVarint.call(this)[a](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[a](!1)},fixed64:function(){return readFixed64.call(this)[a](!0)},sfixed64:function(){return readFixed64.call(this)[a](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$3=requireMinimal();function BufferReader(X){Reader.call(this,X)}BufferReader._configure=function(){util$3.Buffer&&(BufferReader.prototype._slice=util$3.Buffer.prototype.slice)},BufferReader.prototype.string=function X(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},BufferReader._configure();var rpc={},service$1=Service,util$2=requireMinimal();(Service.prototype=Object.create(util$2.EventEmitter.prototype)).constructor=Service;function Service(X,a,te){if(typeof X!="function")throw TypeError("rpcImpl must be a function");util$2.EventEmitter.call(this),this.rpcImpl=X,this.requestDelimited=Boolean(a),this.responseDelimited=Boolean(te)}Service.prototype.rpcCall=function X(a,te,ne,ie,Q){if(!ie)throw TypeError("request must be specified");var q=this;if(!Q)return util$2.asPromise(X,q,a,te,ne,ie);if(!q.rpcImpl){setTimeout(function(){Q(Error("already ended"))},0);return}try{return q.rpcImpl(a,te[q.requestDelimited?"encodeDelimited":"encode"](ie).finish(),function(re,ee){if(re)return q.emit("error",re,a),Q(re);if(ee===null){q.end(!0);return}if(!(ee instanceof ne))try{ee=ne[q.responseDelimited?"decodeDelimited":"decode"](ee)}catch(oe){return q.emit("error",oe,a),Q(oe)}return q.emit("data",ee,a),Q(null,ee)})}catch(W){q.emit("error",W,a),setTimeout(function(){Q(W)},0);return}},Service.prototype.end=function X(a){return this.rpcImpl&&(a||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},function(X){var a=X;a.Service=service$1}(rpc);var roots={};(function(X){var a=X;a.build="minimal",a.Writer=writer,a.BufferWriter=writer_buffer,a.Reader=reader,a.BufferReader=reader_buffer,a.util=requireMinimal(),a.rpc=rpc,a.roots=roots,a.configure=te;function te(){a.util._configure(),a.Writer._configure(a.BufferWriter),a.Reader._configure(a.BufferReader)}te()})(indexMinimal);var util$1={exports:{}},codegen_1,hasRequiredCodegen;function requireCodegen(){if(hasRequiredCodegen)return codegen_1;hasRequiredCodegen=1,codegen_1=X;function X(a,te){typeof a=="string"&&(te=a,a=void 0);var ne=[];function ie(q){if(typeof q!="string"){var W=Q();if(X.verbose&&console.log("codegen: "+W),W="return "+W,q){for(var re=Object.keys(q),ee=new Array(re.length+1),oe=new Array(re.length),se=0;se<re.length;)ee[se]=re[se],oe[se]=q[re[se++]];return ee[se]=W,Function.apply(null,ee).apply(null,oe)}return Function(W)()}for(var ue=new Array(arguments.length-1),ae=0;ae<ue.length;)ue[ae]=arguments[++ae];if(ae=0,q=q.replace(/%([%dfijs])/g,function(he,ge){var de=ue[ae++];switch(ge){case"d":case"f":return String(Number(de));case"i":return String(Math.floor(de));case"j":return JSON.stringify(de);case"s":return String(de)}return"%"}),ae!==ue.length)throw Error("parameter count mismatch");return ne.push(q),ie}function Q(q){return"function "+(q||te||"")+"("+(a&&a.join(",")||"")+`){
  `+ne.join(`
  `)+`
}`}return ie.toString=Q,ie}return X.verbose=!1,codegen_1}var fetch_1,hasRequiredFetch;function requireFetch(){if(hasRequiredFetch)return fetch_1;hasRequiredFetch=1,fetch_1=ne;var X=requireAspromise(),a=requireInquire(),te=a("fs");function ne(ie,Q,q){return typeof Q=="function"?(q=Q,Q={}):Q||(Q={}),q?!Q.xhr&&te&&te.readFile?te.readFile(ie,function(re,ee){return re&&typeof XMLHttpRequest!="undefined"?ne.xhr(ie,Q,q):re?q(re):q(null,Q.binary?ee:ee.toString("utf8"))}):ne.xhr(ie,Q,q):X(ne,this,ie,Q)}return ne.xhr=function(Q,q,W){var re=new XMLHttpRequest;re.onreadystatechange=function(){if(re.readyState===4){if(re.status!==0&&re.status!==200)return W(Error("status "+re.status));if(q.binary){var oe=re.response;if(!oe){oe=[];for(var se=0;se<re.responseText.length;++se)oe.push(re.responseText.charCodeAt(se)&255)}return W(null,typeof Uint8Array!="undefined"?new Uint8Array(oe):oe)}return W(null,re.responseText)}},q.binary&&("overrideMimeType"in re&&re.overrideMimeType("text/plain; charset=x-user-defined"),re.responseType="arraybuffer"),re.open("GET",Q),re.send()},fetch_1}var path={},hasRequiredPath;function requirePath(){return hasRequiredPath||(hasRequiredPath=1,function(X){var a=X,te=a.isAbsolute=function(Q){return/^(?:\/|\w+:)/.test(Q)},ne=a.normalize=function(Q){Q=Q.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var q=Q.split("/"),W=te(Q),re="";W&&(re=q.shift()+"/");for(var ee=0;ee<q.length;)q[ee]===".."?ee>0&&q[ee-1]!==".."?q.splice(--ee,2):W?q.splice(ee,1):++ee:q[ee]==="."?q.splice(ee,1):++ee;return re+q.join("/")};a.resolve=function(Q,q,W){return W||(q=ne(q)),te(q)?q:(W||(Q=ne(Q)),(Q=Q.replace(/(?:\/|^)[^/]+$/,"")).length?ne(Q+"/"+q):q)}}(path)),path}var types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(X){var a=X,te=requireUtil(),ne=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function ie(Q,q){var W=0,re={};for(q|=0;W<Q.length;)re[ne[W+q]]=Q[W++];return re}a.basic=ie([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),a.defaults=ie([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",te.emptyArray,null]),a.long=ie([0,0,0,1,1],7),a.mapKey=ie([0,0,0,5,5,0,0,0,1,1,0,2],2),a.packed=ie([1,5,0,0,0,5,5,0,0,0,1,1,0])}(types)),types}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=q;var X=requireObject();((q.prototype=Object.create(X.prototype)).constructor=q).className="Field";var a=require_enum(),te=requireTypes(),ne=requireUtil(),ie,Q=/^required|optional|repeated$/;q.fromJSON=function(re,ee){return new q(re,ee.id,ee.type,ee.rule,ee.extend,ee.options,ee.comment)};function q(W,re,ee,oe,se,ue,ae){if(ne.isObject(oe)?(ae=se,ue=oe,oe=se=void 0):ne.isObject(se)&&(ae=ue,ue=se,se=void 0),X.call(this,W,ue),!ne.isInteger(re)||re<0)throw TypeError("id must be a non-negative integer");if(!ne.isString(ee))throw TypeError("type must be a string");if(oe!==void 0&&!Q.test(oe=oe.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(se!==void 0&&!ne.isString(se))throw TypeError("extend must be a string");oe==="proto3_optional"&&(oe="optional"),this.rule=oe&&oe!=="optional"?oe:void 0,this.type=ee,this.id=re,this.extend=se||void 0,this.required=oe==="required",this.optional=!this.required,this.repeated=oe==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=ne.Long?te.long[ee]!==void 0:!1,this.bytes=ee==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=ae}return Object.defineProperty(q.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}}),q.prototype.setOption=function(re,ee,oe){return re==="packed"&&(this._packed=null),X.prototype.setOption.call(this,re,ee,oe)},q.prototype.toJSON=function(re){var ee=re?Boolean(re.keepComments):!1;return ne.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",ee?this.comment:void 0])},q.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=te.defaults[this.type])===void 0&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof ie?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof a&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof a))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=ne.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var re;ne.base64.test(this.typeDefault)?ne.base64.decode(this.typeDefault,re=ne.newBuffer(ne.base64.length(this.typeDefault)),0):ne.utf8.write(this.typeDefault,re=ne.newBuffer(ne.utf8.length(this.typeDefault)),0),this.typeDefault=re}return this.map?this.defaultValue=ne.emptyObject:this.repeated?this.defaultValue=ne.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof ie&&(this.parent.ctor.prototype[this.name]=this.defaultValue),X.prototype.resolve.call(this)},q.d=function(re,ee,oe,se){return typeof ee=="function"?ee=ne.decorateType(ee).name:ee&&typeof ee=="object"&&(ee=ne.decorateEnum(ee).name),function(ae,fe){ne.decorateType(ae.constructor).add(new q(fe,re,ee,oe,{default:se}))}},q._configure=function(re){ie=re},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=ne;var X=requireObject();((ne.prototype=Object.create(X.prototype)).constructor=ne).className="OneOf";var a=requireField(),te=requireUtil();function ne(Q,q,W,re){if(Array.isArray(q)||(W=q,q=void 0),X.call(this,Q,W),!(q===void 0||Array.isArray(q)))throw TypeError("fieldNames must be an Array");this.oneof=q||[],this.fieldsArray=[],this.comment=re}ne.fromJSON=function(q,W){return new ne(q,W.oneof,W.options,W.comment)},ne.prototype.toJSON=function(q){var W=q?Boolean(q.keepComments):!1;return te.toObject(["options",this.options,"oneof",this.oneof,"comment",W?this.comment:void 0])};function ie(Q){if(Q.parent)for(var q=0;q<Q.fieldsArray.length;++q)Q.fieldsArray[q].parent||Q.parent.add(Q.fieldsArray[q])}return ne.prototype.add=function(q){if(!(q instanceof a))throw TypeError("field must be a Field");return q.parent&&q.parent!==this.parent&&q.parent.remove(q),this.oneof.push(q.name),this.fieldsArray.push(q),q.partOf=this,ie(this),this},ne.prototype.remove=function(q){if(!(q instanceof a))throw TypeError("field must be a Field");var W=this.fieldsArray.indexOf(q);if(W<0)throw Error(q+" is not a member of "+this);return this.fieldsArray.splice(W,1),W=this.oneof.indexOf(q.name),W>-1&&this.oneof.splice(W,1),q.partOf=null,this},ne.prototype.onAdd=function(q){X.prototype.onAdd.call(this,q);for(var W=this,re=0;re<this.oneof.length;++re){var ee=q.get(this.oneof[re]);ee&&!ee.partOf&&(ee.partOf=W,W.fieldsArray.push(ee))}ie(this)},ne.prototype.onRemove=function(q){for(var W=0,re;W<this.fieldsArray.length;++W)(re=this.fieldsArray[W]).parent&&re.parent.remove(re);X.prototype.onRemove.call(this,q)},ne.d=function(){for(var q=new Array(arguments.length),W=0;W<arguments.length;)q[W]=arguments[W++];return function(ee,oe){te.decorateType(ee.constructor).add(new ne(oe,q)),Object.defineProperty(ee,oe,{get:te.oneOfGetter(q),set:te.oneOfSetter(q)})}},oneof}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=re;var X=requireObject();((re.prototype=Object.create(X.prototype)).constructor=re).className="Namespace";var a=requireField(),te=requireOneof(),ne=requireUtil(),ie,Q,q;re.fromJSON=function(se,ue){return new re(se,ue.options).addJSON(ue.nested)};function W(oe,se){if(!!(oe&&oe.length)){for(var ue={},ae=0;ae<oe.length;++ae)ue[oe[ae].name]=oe[ae].toJSON(se);return ue}}re.arrayToJSON=W,re.isReservedId=function(se,ue){if(se){for(var ae=0;ae<se.length;++ae)if(typeof se[ae]!="string"&&se[ae][0]<=ue&&se[ae][1]>ue)return!0}return!1},re.isReservedName=function(se,ue){if(se){for(var ae=0;ae<se.length;++ae)if(se[ae]===ue)return!0}return!1};function re(oe,se){X.call(this,oe,se),this.nested=void 0,this._nestedArray=null}function ee(oe){return oe._nestedArray=null,oe}return Object.defineProperty(re.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=ne.toArray(this.nested))}}),re.prototype.toJSON=function(se){return ne.toObject(["options",this.options,"nested",W(this.nestedArray,se)])},re.prototype.addJSON=function(se){var ue=this;if(se)for(var ae=Object.keys(se),fe=0,he;fe<ae.length;++fe)he=se[ae[fe]],ue.add((he.fields!==void 0?ie.fromJSON:he.values!==void 0?q.fromJSON:he.methods!==void 0?Q.fromJSON:he.id!==void 0?a.fromJSON:re.fromJSON)(ae[fe],he));return this},re.prototype.get=function(se){return this.nested&&this.nested[se]||null},re.prototype.getEnum=function(se){if(this.nested&&this.nested[se]instanceof q)return this.nested[se].values;throw Error("no such enum: "+se)},re.prototype.add=function(se){if(!(se instanceof a&&se.extend!==void 0||se instanceof ie||se instanceof q||se instanceof Q||se instanceof re||se instanceof te))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var ue=this.get(se.name);if(ue)if(ue instanceof re&&se instanceof re&&!(ue instanceof ie||ue instanceof Q)){for(var ae=ue.nestedArray,fe=0;fe<ae.length;++fe)se.add(ae[fe]);this.remove(ue),this.nested||(this.nested={}),se.setOptions(ue.options,!0)}else throw Error("duplicate name '"+se.name+"' in "+this)}return this.nested[se.name]=se,se.onAdd(this),ee(this)},re.prototype.remove=function(se){if(!(se instanceof X))throw TypeError("object must be a ReflectionObject");if(se.parent!==this)throw Error(se+" is not a member of "+this);return delete this.nested[se.name],Object.keys(this.nested).length||(this.nested=void 0),se.onRemove(this),ee(this)},re.prototype.define=function(se,ue){if(ne.isString(se))se=se.split(".");else if(!Array.isArray(se))throw TypeError("illegal path");if(se&&se.length&&se[0]==="")throw Error("path must be relative");for(var ae=this;se.length>0;){var fe=se.shift();if(ae.nested&&ae.nested[fe]){if(ae=ae.nested[fe],!(ae instanceof re))throw Error("path conflicts with non-namespace objects")}else ae.add(ae=new re(fe))}return ue&&ae.addJSON(ue),ae},re.prototype.resolveAll=function(){for(var se=this.nestedArray,ue=0;ue<se.length;)se[ue]instanceof re?se[ue++].resolveAll():se[ue++].resolve();return this.resolve()},re.prototype.lookup=function(se,ue,ae){if(typeof ue=="boolean"?(ae=ue,ue=void 0):ue&&!Array.isArray(ue)&&(ue=[ue]),ne.isString(se)&&se.length){if(se===".")return this.root;se=se.split(".")}else if(!se.length)return this;if(se[0]==="")return this.root.lookup(se.slice(1),ue);var fe=this.get(se[0]);if(fe){if(se.length===1){if(!ue||ue.indexOf(fe.constructor)>-1)return fe}else if(fe instanceof re&&(fe=fe.lookup(se.slice(1),ue,!0)))return fe}else for(var he=0;he<this.nestedArray.length;++he)if(this._nestedArray[he]instanceof re&&(fe=this._nestedArray[he].lookup(se,ue,!0)))return fe;return this.parent===null||ae?null:this.parent.lookup(se,ue)},re.prototype.lookupType=function(se){var ue=this.lookup(se,[ie]);if(!ue)throw Error("no such type: "+se);return ue},re.prototype.lookupEnum=function(se){var ue=this.lookup(se,[q]);if(!ue)throw Error("no such Enum '"+se+"' in "+this);return ue},re.prototype.lookupTypeOrEnum=function(se){var ue=this.lookup(se,[ie,q]);if(!ue)throw Error("no such Type or Enum '"+se+"' in "+this);return ue},re.prototype.lookupService=function(se){var ue=this.lookup(se,[Q]);if(!ue)throw Error("no such Service '"+se+"' in "+this);return ue},re._configure=function(oe,se,ue){ie=oe,Q=se,q=ue},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=ne;var X=requireField();((ne.prototype=Object.create(X.prototype)).constructor=ne).className="MapField";var a=requireTypes(),te=requireUtil();function ne(ie,Q,q,W,re,ee){if(X.call(this,ie,Q,W,void 0,void 0,re,ee),!te.isString(q))throw TypeError("keyType must be a string");this.keyType=q,this.resolvedKeyType=null,this.map=!0}return ne.fromJSON=function(Q,q){return new ne(Q,q.id,q.keyType,q.type,q.options,q.comment)},ne.prototype.toJSON=function(Q){var q=Q?Boolean(Q.keepComments):!1;return te.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",q?this.comment:void 0])},ne.prototype.resolve=function(){if(this.resolved)return this;if(a.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return X.prototype.resolve.call(this)},ne.d=function(Q,q,W){return typeof W=="function"?W=te.decorateType(W).name:W&&typeof W=="object"&&(W=te.decorateEnum(W).name),function(ee,oe){te.decorateType(ee.constructor).add(new ne(oe,Q,q,W))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=te;var X=requireObject();((te.prototype=Object.create(X.prototype)).constructor=te).className="Method";var a=requireUtil();function te(ne,ie,Q,q,W,re,ee,oe,se){if(a.isObject(W)?(ee=W,W=re=void 0):a.isObject(re)&&(ee=re,re=void 0),!(ie===void 0||a.isString(ie)))throw TypeError("type must be a string");if(!a.isString(Q))throw TypeError("requestType must be a string");if(!a.isString(q))throw TypeError("responseType must be a string");X.call(this,ne,ee),this.type=ie||"rpc",this.requestType=Q,this.requestStream=W?!0:void 0,this.responseType=q,this.responseStream=re?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=oe,this.parsedOptions=se}return te.fromJSON=function(ie,Q){return new te(ie,Q.type,Q.requestType,Q.responseType,Q.requestStream,Q.responseStream,Q.options,Q.comment,Q.parsedOptions)},te.prototype.toJSON=function(ie){var Q=ie?Boolean(ie.keepComments):!1;return a.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",Q?this.comment:void 0,"parsedOptions",this.parsedOptions])},te.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),X.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=ie;var X=requireNamespace();((ie.prototype=Object.create(X.prototype)).constructor=ie).className="Service";var a=requireMethod(),te=requireUtil(),ne=rpc;function ie(q,W){X.call(this,q,W),this.methods={},this._methodsArray=null}ie.fromJSON=function(W,re){var ee=new ie(W,re.options);if(re.methods)for(var oe=Object.keys(re.methods),se=0;se<oe.length;++se)ee.add(a.fromJSON(oe[se],re.methods[oe[se]]));return re.nested&&ee.addJSON(re.nested),ee.comment=re.comment,ee},ie.prototype.toJSON=function(W){var re=X.prototype.toJSON.call(this,W),ee=W?Boolean(W.keepComments):!1;return te.toObject(["options",re&&re.options||void 0,"methods",X.arrayToJSON(this.methodsArray,W)||{},"nested",re&&re.nested||void 0,"comment",ee?this.comment:void 0])},Object.defineProperty(ie.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=te.toArray(this.methods))}});function Q(q){return q._methodsArray=null,q}return ie.prototype.get=function(W){return this.methods[W]||X.prototype.get.call(this,W)},ie.prototype.resolveAll=function(){for(var W=this.methodsArray,re=0;re<W.length;++re)W[re].resolve();return X.prototype.resolve.call(this)},ie.prototype.add=function(W){if(this.get(W.name))throw Error("duplicate name '"+W.name+"' in "+this);return W instanceof a?(this.methods[W.name]=W,W.parent=this,Q(this)):X.prototype.add.call(this,W)},ie.prototype.remove=function(W){if(W instanceof a){if(this.methods[W.name]!==W)throw Error(W+" is not a member of "+this);return delete this.methods[W.name],W.parent=null,Q(this)}return X.prototype.remove.call(this,W)},ie.prototype.create=function(W,re,ee){for(var oe=new ne.Service(W,re,ee),se=0,ue;se<this.methodsArray.length;++se){var ae=te.lcFirst((ue=this._methodsArray[se]).resolve().name).replace(/[^$\w_]/g,"");oe[ae]=te.codegen(["r","c"],te.isReserved(ae)?ae+"_":ae)("return this.rpcCall(m,q,s,r,c)")({m:ue,q:ue.resolvedRequestType.ctor,s:ue.resolvedResponseType.ctor})}return oe},service}var message=Message,util=requireMinimal();function Message(X){if(X)for(var a=Object.keys(X),te=0;te<a.length;++te)this[a[te]]=X[a[te]]}Message.create=function X(a){return this.$type.create(a)},Message.encode=function X(a,te){return this.$type.encode(a,te)},Message.encodeDelimited=function X(a,te){return this.$type.encodeDelimited(a,te)},Message.decode=function X(a){return this.$type.decode(a)},Message.decodeDelimited=function X(a){return this.$type.decodeDelimited(a)},Message.verify=function X(a){return this.$type.verify(a)},Message.fromObject=function X(a){return this.$type.fromObject(a)},Message.toObject=function X(a,te){return this.$type.toObject(a,te)},Message.prototype.toJSON=function X(){return this.$type.toObject(this,util.toJSONOptions)};var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=ie;var X=require_enum(),a=requireTypes(),te=requireUtil();function ne(Q){return"missing required '"+Q.name+"'"}function ie(Q){var q=te.codegen(["r","l"],Q.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(Q.fieldsArray.filter(function(ue){return ue.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");Q.group&&q("if((t&7)===4)")("break"),q("switch(t>>>3){");for(var W=0;W<Q.fieldsArray.length;++W){var re=Q._fieldsArray[W].resolve(),ee=re.resolvedType instanceof X?"int32":re.type,oe="m"+te.safeProp(re.name);q("case %i:",re.id),re.map?(q("if(%s===util.emptyObject)",oe)("%s={}",oe)("var c2 = r.uint32()+r.pos"),a.defaults[re.keyType]!==void 0?q("k=%j",a.defaults[re.keyType]):q("k=null"),a.defaults[ee]!==void 0?q("value=%j",a.defaults[ee]):q("value=null"),q("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",re.keyType)("case 2:"),a.basic[ee]===void 0?q("value=types[%i].decode(r,r.uint32())",W):q("value=r.%s()",ee),q("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),a.long[re.keyType]!==void 0?q('%s[typeof k==="object"?util.longToHash(k):k]=value',oe):q("%s[k]=value",oe)):re.repeated?(q("if(!(%s&&%s.length))",oe,oe)("%s=[]",oe),a.packed[ee]!==void 0&&q("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",oe,ee)("}else"),a.basic[ee]===void 0?q(re.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",oe,W):q("%s.push(r.%s())",oe,ee)):a.basic[ee]===void 0?q(re.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",oe,W):q("%s=r.%s()",oe,ee),q("break")}for(q("default:")("r.skipType(t&7)")("break")("}")("}"),W=0;W<Q._fieldsArray.length;++W){var se=Q._fieldsArray[W];se.required&&q("if(!m.hasOwnProperty(%j))",se.name)("throw util.ProtocolError(%j,{instance:m})",ne(se))}return q("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=Q;var X=require_enum(),a=requireUtil();function te(q,W){return q.name+": "+W+(q.repeated&&W!=="array"?"[]":q.map&&W!=="object"?"{k:"+q.keyType+"}":"")+" expected"}function ne(q,W,re,ee){if(W.resolvedType)if(W.resolvedType instanceof X){q("switch(%s){",ee)("default:")("return%j",te(W,"enum value"));for(var oe=Object.keys(W.resolvedType.values),se=0;se<oe.length;++se)q("case %i:",W.resolvedType.values[oe[se]]);q("break")("}")}else q("{")("var e=types[%i].verify(%s);",re,ee)("if(e)")("return%j+e",W.name+".")("}");else switch(W.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":q("if(!util.isInteger(%s))",ee)("return%j",te(W,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":q("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",ee,ee,ee,ee)("return%j",te(W,"integer|Long"));break;case"float":case"double":q('if(typeof %s!=="number")',ee)("return%j",te(W,"number"));break;case"bool":q('if(typeof %s!=="boolean")',ee)("return%j",te(W,"boolean"));break;case"string":q("if(!util.isString(%s))",ee)("return%j",te(W,"string"));break;case"bytes":q('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',ee,ee,ee)("return%j",te(W,"buffer"));break}return q}function ie(q,W,re){switch(W.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":q("if(!util.key32Re.test(%s))",re)("return%j",te(W,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":q("if(!util.key64Re.test(%s))",re)("return%j",te(W,"integer|Long key"));break;case"bool":q("if(!util.key2Re.test(%s))",re)("return%j",te(W,"boolean key"));break}return q}function Q(q){var W=a.codegen(["m"],q.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),re=q.oneofsArray,ee={};re.length&&W("var p={}");for(var oe=0;oe<q.fieldsArray.length;++oe){var se=q._fieldsArray[oe].resolve(),ue="m"+a.safeProp(se.name);if(se.optional&&W("if(%s!=null&&m.hasOwnProperty(%j)){",ue,se.name),se.map)W("if(!util.isObject(%s))",ue)("return%j",te(se,"object"))("var k=Object.keys(%s)",ue)("for(var i=0;i<k.length;++i){"),ie(W,se,"k[i]"),ne(W,se,oe,ue+"[k[i]]")("}");else if(se.repeated)W("if(!Array.isArray(%s))",ue)("return%j",te(se,"array"))("for(var i=0;i<%s.length;++i){",ue),ne(W,se,oe,ue+"[i]")("}");else{if(se.partOf){var ae=a.safeProp(se.partOf.name);ee[se.partOf.name]===1&&W("if(p%s===1)",ae)("return%j",se.partOf.name+": multiple values"),ee[se.partOf.name]=1,W("p%s=1",ae)}ne(W,se,oe,ue)}se.optional&&W("}")}return W("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(X){var a=X,te=require_enum(),ne=requireUtil();function ie(q,W,re,ee){if(W.resolvedType)if(W.resolvedType instanceof te){q("switch(d%s){",ee);for(var oe=W.resolvedType.values,se=Object.keys(oe),ue=0;ue<se.length;++ue)W.repeated&&oe[se[ue]]===W.typeDefault&&q("default:"),q("case%j:",se[ue])("case %i:",oe[se[ue]])("m%s=%j",ee,oe[se[ue]])("break");q("}")}else q('if(typeof d%s!=="object")',ee)("throw TypeError(%j)",W.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",ee,re,ee);else{var ae=!1;switch(W.type){case"double":case"float":q("m%s=Number(d%s)",ee,ee);break;case"uint32":case"fixed32":q("m%s=d%s>>>0",ee,ee);break;case"int32":case"sint32":case"sfixed32":q("m%s=d%s|0",ee,ee);break;case"uint64":ae=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":q("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",ee,ee,ae)('else if(typeof d%s==="string")',ee)("m%s=parseInt(d%s,10)",ee,ee)('else if(typeof d%s==="number")',ee)("m%s=d%s",ee,ee)('else if(typeof d%s==="object")',ee)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",ee,ee,ee,ae?"true":"");break;case"bytes":q('if(typeof d%s==="string")',ee)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",ee,ee,ee)("else if(d%s.length)",ee)("m%s=d%s",ee,ee);break;case"string":q("m%s=String(d%s)",ee,ee);break;case"bool":q("m%s=Boolean(d%s)",ee,ee);break}}return q}a.fromObject=function(W){var re=W.fieldsArray,ee=ne.codegen(["d"],W.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!re.length)return ee("return new this.ctor");ee("var m=new this.ctor");for(var oe=0;oe<re.length;++oe){var se=re[oe].resolve(),ue=ne.safeProp(se.name);se.map?(ee("if(d%s){",ue)('if(typeof d%s!=="object")',ue)("throw TypeError(%j)",se.fullName+": object expected")("m%s={}",ue)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",ue),ie(ee,se,oe,ue+"[ks[i]]")("}")("}")):se.repeated?(ee("if(d%s){",ue)("if(!Array.isArray(d%s))",ue)("throw TypeError(%j)",se.fullName+": array expected")("m%s=[]",ue)("for(var i=0;i<d%s.length;++i){",ue),ie(ee,se,oe,ue+"[i]")("}")("}")):(se.resolvedType instanceof te||ee("if(d%s!=null){",ue),ie(ee,se,oe,ue),se.resolvedType instanceof te||ee("}"))}return ee("return m")};function Q(q,W,re,ee){if(W.resolvedType)W.resolvedType instanceof te?q("d%s=o.enums===String?types[%i].values[m%s]:m%s",ee,re,ee,ee):q("d%s=types[%i].toObject(m%s,o)",ee,re,ee);else{var oe=!1;switch(W.type){case"double":case"float":q("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",ee,ee,ee,ee);break;case"uint64":oe=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":q('if(typeof m%s==="number")',ee)("d%s=o.longs===String?String(m%s):m%s",ee,ee,ee)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",ee,ee,ee,ee,oe?"true":"",ee);break;case"bytes":q("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",ee,ee,ee,ee,ee);break;default:q("d%s=m%s",ee,ee);break}}return q}a.toObject=function(W){var re=W.fieldsArray.slice().sort(ne.compareFieldsById);if(!re.length)return ne.codegen()("return {}");for(var ee=ne.codegen(["m","o"],W.name+"$toObject")("if(!o)")("o={}")("var d={}"),oe=[],se=[],ue=[],ae=0;ae<re.length;++ae)re[ae].partOf||(re[ae].resolve().repeated?oe:re[ae].map?se:ue).push(re[ae]);if(oe.length){for(ee("if(o.arrays||o.defaults){"),ae=0;ae<oe.length;++ae)ee("d%s=[]",ne.safeProp(oe[ae].name));ee("}")}if(se.length){for(ee("if(o.objects||o.defaults){"),ae=0;ae<se.length;++ae)ee("d%s={}",ne.safeProp(se[ae].name));ee("}")}if(ue.length){for(ee("if(o.defaults){"),ae=0;ae<ue.length;++ae){var fe=ue[ae],he=ne.safeProp(fe.name);if(fe.resolvedType instanceof te)ee("d%s=o.enums===String?%j:%j",he,fe.resolvedType.valuesById[fe.typeDefault],fe.typeDefault);else if(fe.long)ee("if(util.Long){")("var n=new util.Long(%i,%i,%j)",fe.typeDefault.low,fe.typeDefault.high,fe.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",he)("}else")("d%s=o.longs===String?%j:%i",he,fe.typeDefault.toString(),fe.typeDefault.toNumber());else if(fe.bytes){var ge="["+Array.prototype.slice.call(fe.typeDefault).join(",")+"]";ee("if(o.bytes===String)d%s=%j",he,String.fromCharCode.apply(String,fe.typeDefault))("else{")("d%s=%s",he,ge)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",he,he)("}")}else ee("d%s=%j",he,fe.typeDefault)}ee("}")}var de=!1;for(ae=0;ae<re.length;++ae){var fe=re[ae],le=W._fieldsArray.indexOf(fe),he=ne.safeProp(fe.name);fe.map?(de||(de=!0,ee("var ks2")),ee("if(m%s&&(ks2=Object.keys(m%s)).length){",he,he)("d%s={}",he)("for(var j=0;j<ks2.length;++j){"),Q(ee,fe,le,he+"[ks2[j]]")("}")):fe.repeated?(ee("if(m%s&&m%s.length){",he,he)("d%s=[]",he)("for(var j=0;j<m%s.length;++j){",he),Q(ee,fe,le,he+"[j]")("}")):(ee("if(m%s!=null&&m.hasOwnProperty(%j)){",he,fe.name),Q(ee,fe,le,he),fe.partOf&&ee("if(o.oneofs)")("d%s=%j",ne.safeProp(fe.partOf.name),fe.name)),ee("}")}return ee("return d")}}(converter)),converter}var wrappers={};(function(X){var a=X,te=message;a[".google.protobuf.Any"]={fromObject:function(ne){if(ne&&ne["@type"]){var ie=ne["@type"].substring(ne["@type"].lastIndexOf("/")+1),Q=this.lookup(ie);if(Q){var q=ne["@type"].charAt(0)==="."?ne["@type"].substr(1):ne["@type"];return q.indexOf("/")===-1&&(q="/"+q),this.create({type_url:q,value:Q.encode(Q.fromObject(ne)).finish()})}}return this.fromObject(ne)},toObject:function(ne,ie){var Q="type.googleapis.com/",q="",W="";if(ie&&ie.json&&ne.type_url&&ne.value){W=ne.type_url.substring(ne.type_url.lastIndexOf("/")+1),q=ne.type_url.substring(0,ne.type_url.lastIndexOf("/")+1);var re=this.lookup(W);re&&(ne=re.decode(ne.value))}if(!(ne instanceof this.ctor)&&ne instanceof te){var ee=ne.$type.toObject(ne,ie),oe=ne.$type.fullName[0]==="."?ne.$type.fullName.substr(1):ne.$type.fullName;return q===""&&(q=Q),W=q+oe,ee["@type"]=W,ee}return this.toObject(ne,ie)}}})(wrappers);var type,hasRequiredType;function requireType(){if(hasRequiredType)return type;hasRequiredType=1,type=he;var X=requireNamespace();((he.prototype=Object.create(X.prototype)).constructor=he).className="Type";var a=require_enum(),te=requireOneof(),ne=requireField(),ie=requireMapfield(),Q=requireService(),q=message,W=reader,re=writer,ee=requireUtil(),oe=requireEncoder(),se=requireDecoder(),ue=requireVerifier(),ae=requireConverter(),fe=wrappers;function he(de,le){X.call(this,de,le),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(he.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var de=Object.keys(this.fields),le=0;le<de.length;++le){var ce=this.fields[de[le]],pe=ce.id;if(this._fieldsById[pe])throw Error("duplicate id "+pe+" in "+this);this._fieldsById[pe]=ce}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=ee.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=ee.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=he.generateConstructor(this)())},set:function(de){var le=de.prototype;le instanceof q||((de.prototype=new q).constructor=de,ee.merge(de.prototype,le)),de.$type=de.prototype.$type=this,ee.merge(de,q,!0),this._ctor=de;for(var ce=0;ce<this.fieldsArray.length;++ce)this._fieldsArray[ce].resolve();var pe={};for(ce=0;ce<this.oneofsArray.length;++ce)pe[this._oneofsArray[ce].resolve().name]={get:ee.oneOfGetter(this._oneofsArray[ce].oneof),set:ee.oneOfSetter(this._oneofsArray[ce].oneof)};ce&&Object.defineProperties(de.prototype,pe)}}}),he.generateConstructor=function(le){for(var ce=ee.codegen(["p"],le.name),pe=0,me;pe<le.fieldsArray.length;++pe)(me=le._fieldsArray[pe]).map?ce("this%s={}",ee.safeProp(me.name)):me.repeated&&ce("this%s=[]",ee.safeProp(me.name));return ce("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function ge(de){return de._fieldsById=de._fieldsArray=de._oneofsArray=null,delete de.encode,delete de.decode,delete de.verify,de}return he.fromJSON=function(le,ce){var pe=new he(le,ce.options);pe.extensions=ce.extensions,pe.reserved=ce.reserved;for(var me=Object.keys(ce.fields),ye=0;ye<me.length;++ye)pe.add((typeof ce.fields[me[ye]].keyType!="undefined"?ie.fromJSON:ne.fromJSON)(me[ye],ce.fields[me[ye]]));if(ce.oneofs)for(me=Object.keys(ce.oneofs),ye=0;ye<me.length;++ye)pe.add(te.fromJSON(me[ye],ce.oneofs[me[ye]]));if(ce.nested)for(me=Object.keys(ce.nested),ye=0;ye<me.length;++ye){var ke=ce.nested[me[ye]];pe.add((ke.id!==void 0?ne.fromJSON:ke.fields!==void 0?he.fromJSON:ke.values!==void 0?a.fromJSON:ke.methods!==void 0?Q.fromJSON:X.fromJSON)(me[ye],ke))}return ce.extensions&&ce.extensions.length&&(pe.extensions=ce.extensions),ce.reserved&&ce.reserved.length&&(pe.reserved=ce.reserved),ce.group&&(pe.group=!0),ce.comment&&(pe.comment=ce.comment),pe},he.prototype.toJSON=function(le){var ce=X.prototype.toJSON.call(this,le),pe=le?Boolean(le.keepComments):!1;return ee.toObject(["options",ce&&ce.options||void 0,"oneofs",X.arrayToJSON(this.oneofsArray,le),"fields",X.arrayToJSON(this.fieldsArray.filter(function(me){return!me.declaringField}),le)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",ce&&ce.nested||void 0,"comment",pe?this.comment:void 0])},he.prototype.resolveAll=function(){for(var le=this.fieldsArray,ce=0;ce<le.length;)le[ce++].resolve();var pe=this.oneofsArray;for(ce=0;ce<pe.length;)pe[ce++].resolve();return X.prototype.resolveAll.call(this)},he.prototype.get=function(le){return this.fields[le]||this.oneofs&&this.oneofs[le]||this.nested&&this.nested[le]||null},he.prototype.add=function(le){if(this.get(le.name))throw Error("duplicate name '"+le.name+"' in "+this);if(le instanceof ne&&le.extend===void 0){if(this._fieldsById?this._fieldsById[le.id]:this.fieldsById[le.id])throw Error("duplicate id "+le.id+" in "+this);if(this.isReservedId(le.id))throw Error("id "+le.id+" is reserved in "+this);if(this.isReservedName(le.name))throw Error("name '"+le.name+"' is reserved in "+this);return le.parent&&le.parent.remove(le),this.fields[le.name]=le,le.message=this,le.onAdd(this),ge(this)}return le instanceof te?(this.oneofs||(this.oneofs={}),this.oneofs[le.name]=le,le.onAdd(this),ge(this)):X.prototype.add.call(this,le)},he.prototype.remove=function(le){if(le instanceof ne&&le.extend===void 0){if(!this.fields||this.fields[le.name]!==le)throw Error(le+" is not a member of "+this);return delete this.fields[le.name],le.parent=null,le.onRemove(this),ge(this)}if(le instanceof te){if(!this.oneofs||this.oneofs[le.name]!==le)throw Error(le+" is not a member of "+this);return delete this.oneofs[le.name],le.parent=null,le.onRemove(this),ge(this)}return X.prototype.remove.call(this,le)},he.prototype.isReservedId=function(le){return X.isReservedId(this.reserved,le)},he.prototype.isReservedName=function(le){return X.isReservedName(this.reserved,le)},he.prototype.create=function(le){return new this.ctor(le)},he.prototype.setup=function(){for(var le=this.fullName,ce=[],pe=0;pe<this.fieldsArray.length;++pe)ce.push(this._fieldsArray[pe].resolve().resolvedType);this.encode=oe(this)({Writer:re,types:ce,util:ee}),this.decode=se(this)({Reader:W,types:ce,util:ee}),this.verify=ue(this)({types:ce,util:ee}),this.fromObject=ae.fromObject(this)({types:ce,util:ee}),this.toObject=ae.toObject(this)({types:ce,util:ee});var me=fe[le];if(me){var ye=Object.create(this);ye.fromObject=this.fromObject,this.fromObject=me.fromObject.bind(ye),ye.toObject=this.toObject,this.toObject=me.toObject.bind(ye)}return this},he.prototype.encode=function(le,ce){return this.setup().encode(le,ce)},he.prototype.encodeDelimited=function(le,ce){return this.encode(le,ce&&ce.len?ce.fork():ce).ldelim()},he.prototype.decode=function(le,ce){return this.setup().decode(le,ce)},he.prototype.decodeDelimited=function(le){return le instanceof W||(le=W.create(le)),this.decode(le,le.uint32())},he.prototype.verify=function(le){return this.setup().verify(le)},he.prototype.fromObject=function(le){return this.setup().fromObject(le)},he.prototype.toObject=function(le,ce){return this.setup().toObject(le,ce)},he.d=function(le){return function(pe){ee.decorateType(pe,le)}},type}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1,root=re;var X=requireNamespace();((re.prototype=Object.create(X.prototype)).constructor=re).className="Root";var a=requireField(),te=require_enum(),ne=requireOneof(),ie=requireUtil(),Q,q,W;function re(ue){X.call(this,"",ue),this.deferred=[],this.files=[]}re.fromJSON=function(ae,fe){return fe||(fe=new re),ae.options&&fe.setOptions(ae.options),fe.addJSON(ae.nested)},re.prototype.resolvePath=ie.path.resolve,re.prototype.fetch=ie.fetch;function ee(){}re.prototype.load=function ue(ae,fe,he){typeof fe=="function"&&(he=fe,fe=void 0);var ge=this;if(!he)return ie.asPromise(ue,ge,ae,fe);var de=he===ee;function le(ve,we){if(!!he){var Oe=he;if(he=null,de)throw ve;Oe(ve,we)}}function ce(ve){var we=ve.lastIndexOf("google/protobuf/");if(we>-1){var Oe=ve.substring(we);if(Oe in W)return Oe}return null}function pe(ve,we){try{if(ie.isString(we)&&we.charAt(0)==="{"&&(we=JSON.parse(we)),!ie.isString(we))ge.setOptions(we.options).addJSON(we.nested);else{q.filename=ve;var Oe=q(we,ge,fe),be,_e=0;if(Oe.imports)for(;_e<Oe.imports.length;++_e)(be=ce(Oe.imports[_e])||ge.resolvePath(ve,Oe.imports[_e]))&&me(be);if(Oe.weakImports)for(_e=0;_e<Oe.weakImports.length;++_e)(be=ce(Oe.weakImports[_e])||ge.resolvePath(ve,Oe.weakImports[_e]))&&me(be,!0)}}catch(Re){le(Re)}!de&&!ye&&le(null,ge)}function me(ve,we){if(!(ge.files.indexOf(ve)>-1)){if(ge.files.push(ve),ve in W){de?pe(ve,W[ve]):(++ye,setTimeout(function(){--ye,pe(ve,W[ve])}));return}if(de){var Oe;try{Oe=ie.fs.readFileSync(ve).toString("utf8")}catch(be){we||le(be);return}pe(ve,Oe)}else++ye,ge.fetch(ve,function(be,_e){if(--ye,!!he){if(be){we?ye||le(null,ge):le(be);return}pe(ve,_e)}})}}var ye=0;ie.isString(ae)&&(ae=[ae]);for(var ke=0,Be;ke<ae.length;++ke)(Be=ge.resolvePath("",ae[ke]))&&me(Be);if(de)return ge;ye||le(null,ge)},re.prototype.loadSync=function(ae,fe){if(!ie.isNode)throw Error("not supported");return this.load(ae,fe,ee)},re.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(ae){return"'extend "+ae.extend+"' in "+ae.parent.fullName}).join(", "));return X.prototype.resolveAll.call(this)};var oe=/^[A-Z]/;function se(ue,ae){var fe=ae.parent.lookup(ae.extend);if(fe){var he=new a(ae.fullName,ae.id,ae.type,ae.rule,void 0,ae.options);return he.declaringField=ae,ae.extensionField=he,fe.add(he),!0}return!1}return re.prototype._handleAdd=function(ae){if(ae instanceof a)ae.extend!==void 0&&!ae.extensionField&&(se(this,ae)||this.deferred.push(ae));else if(ae instanceof te)oe.test(ae.name)&&(ae.parent[ae.name]=ae.values);else if(!(ae instanceof ne)){if(ae instanceof Q)for(var fe=0;fe<this.deferred.length;)se(this,this.deferred[fe])?this.deferred.splice(fe,1):++fe;for(var he=0;he<ae.nestedArray.length;++he)this._handleAdd(ae._nestedArray[he]);oe.test(ae.name)&&(ae.parent[ae.name]=ae)}},re.prototype._handleRemove=function(ae){if(ae instanceof a){if(ae.extend!==void 0)if(ae.extensionField)ae.extensionField.parent.remove(ae.extensionField),ae.extensionField=null;else{var fe=this.deferred.indexOf(ae);fe>-1&&this.deferred.splice(fe,1)}}else if(ae instanceof te)oe.test(ae.name)&&delete ae.parent[ae.name];else if(ae instanceof X){for(var he=0;he<ae.nestedArray.length;++he)this._handleRemove(ae._nestedArray[he]);oe.test(ae.name)&&delete ae.parent[ae.name]}},re._configure=function(ue,ae,fe){Q=ue,q=ae,W=fe},root}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(X){var a=X.exports=requireMinimal(),te=roots,ne,ie;a.codegen=requireCodegen(),a.fetch=requireFetch(),a.path=requirePath(),a.fs=a.inquire("fs"),a.toArray=function(oe){if(oe){for(var se=Object.keys(oe),ue=new Array(se.length),ae=0;ae<se.length;)ue[ae]=oe[se[ae++]];return ue}return[]},a.toObject=function(oe){for(var se={},ue=0;ue<oe.length;){var ae=oe[ue++],fe=oe[ue++];fe!==void 0&&(se[ae]=fe)}return se};var Q=/\\/g,q=/"/g;a.isReserved=function(oe){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(oe)},a.safeProp=function(oe){return!/^[$\w_]+$/.test(oe)||a.isReserved(oe)?'["'+oe.replace(Q,"\\\\").replace(q,'\\"')+'"]':"."+oe},a.ucFirst=function(oe){return oe.charAt(0).toUpperCase()+oe.substring(1)};var W=/_([a-z])/g;a.camelCase=function(oe){return oe.substring(0,1)+oe.substring(1).replace(W,function(se,ue){return ue.toUpperCase()})},a.compareFieldsById=function(oe,se){return oe.id-se.id},a.decorateType=function(oe,se){if(oe.$type)return se&&oe.$type.name!==se&&(a.decorateRoot.remove(oe.$type),oe.$type.name=se,a.decorateRoot.add(oe.$type)),oe.$type;ne||(ne=requireType());var ue=new ne(se||oe.name);return a.decorateRoot.add(ue),ue.ctor=oe,Object.defineProperty(oe,"$type",{value:ue,enumerable:!1}),Object.defineProperty(oe.prototype,"$type",{value:ue,enumerable:!1}),ue};var re=0;a.decorateEnum=function(oe){if(oe.$type)return oe.$type;ie||(ie=require_enum());var se=new ie("Enum"+re++,oe);return a.decorateRoot.add(se),Object.defineProperty(oe,"$type",{value:se,enumerable:!1}),se},a.setProperty=function(oe,se,ue){function ae(fe,he,ge){var de=he.shift();if(he.length>0)fe[de]=ae(fe[de]||{},he,ge);else{var le=fe[de];le&&(ge=[].concat(le).concat(ge)),fe[de]=ge}return fe}if(typeof oe!="object")throw TypeError("dst must be an object");if(!se)throw TypeError("path must be specified");return se=se.split("."),ae(oe,se,ue)},Object.defineProperty(a,"decorateRoot",{get:function(){return te.decorated||(te.decorated=new(requireRoot()))}})}(util$1)),util$1.exports}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=te,te.className="ReflectionObject";var X=requireUtil(),a;function te(ne,ie){if(!X.isString(ne))throw TypeError("name must be a string");if(ie&&!X.isObject(ie))throw TypeError("options must be an object");this.options=ie,this.parsedOptions=null,this.name=ne,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(te.prototype,{root:{get:function(){for(var ne=this;ne.parent!==null;)ne=ne.parent;return ne}},fullName:{get:function(){for(var ne=[this.name],ie=this.parent;ie;)ne.unshift(ie.name),ie=ie.parent;return ne.join(".")}}}),te.prototype.toJSON=function(){throw Error()},te.prototype.onAdd=function(ie){this.parent&&this.parent!==ie&&this.parent.remove(this),this.parent=ie,this.resolved=!1;var Q=ie.root;Q instanceof a&&Q._handleAdd(this)},te.prototype.onRemove=function(ie){var Q=ie.root;Q instanceof a&&Q._handleRemove(this),this.parent=null,this.resolved=!1},te.prototype.resolve=function(){return this.resolved?this:(this.root instanceof a&&(this.resolved=!0),this)},te.prototype.getOption=function(ie){if(this.options)return this.options[ie]},te.prototype.setOption=function(ie,Q,q){return(!q||!this.options||this.options[ie]===void 0)&&((this.options||(this.options={}))[ie]=Q),this},te.prototype.setParsedOption=function(ie,Q,q){this.parsedOptions||(this.parsedOptions=[]);var W=this.parsedOptions;if(q){var re=W.find(function(se){return Object.prototype.hasOwnProperty.call(se,ie)});if(re){var ee=re[ie];X.setProperty(ee,q,Q)}else re={},re[ie]=X.setProperty({},q,Q),W.push(re)}else{var oe={};oe[ie]=Q,W.push(oe)}return this},te.prototype.setOptions=function(ie,Q){if(ie)for(var q=Object.keys(ie),W=0;W<q.length;++W)this.setOption(q[W],ie[q[W]],Q);return this},te.prototype.toString=function(){var ie=this.constructor.className,Q=this.fullName;return Q.length?ie+" "+Q:ie},te._configure=function(ne){a=ne},object}var _enum,hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,_enum=ne;var X=requireObject();((ne.prototype=Object.create(X.prototype)).constructor=ne).className="Enum";var a=requireNamespace(),te=requireUtil();function ne(ie,Q,q,W,re){if(X.call(this,ie,q),Q&&typeof Q!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=W,this.comments=re||{},this.reserved=void 0,Q)for(var ee=Object.keys(Q),oe=0;oe<ee.length;++oe)typeof Q[ee[oe]]=="number"&&(this.valuesById[this.values[ee[oe]]=Q[ee[oe]]]=ee[oe])}return ne.fromJSON=function(Q,q){var W=new ne(Q,q.values,q.options,q.comment,q.comments);return W.reserved=q.reserved,W},ne.prototype.toJSON=function(Q){var q=Q?Boolean(Q.keepComments):!1;return te.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",q?this.comment:void 0,"comments",q?this.comments:void 0])},ne.prototype.add=function(Q,q,W){if(!te.isString(Q))throw TypeError("name must be a string");if(!te.isInteger(q))throw TypeError("id must be an integer");if(this.values[Q]!==void 0)throw Error("duplicate name '"+Q+"' in "+this);if(this.isReservedId(q))throw Error("id "+q+" is reserved in "+this);if(this.isReservedName(Q))throw Error("name '"+Q+"' is reserved in "+this);if(this.valuesById[q]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+q+" in "+this);this.values[Q]=q}else this.valuesById[this.values[Q]=q]=Q;return this.comments[Q]=W||null,this},ne.prototype.remove=function(Q){if(!te.isString(Q))throw TypeError("name must be a string");var q=this.values[Q];if(q==null)throw Error("name '"+Q+"' does not exist in "+this);return delete this.valuesById[q],delete this.values[Q],delete this.comments[Q],this},ne.prototype.isReservedId=function(Q){return a.isReservedId(this.reserved,Q)},ne.prototype.isReservedName=function(Q){return a.isReservedName(this.reserved,Q)},_enum}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=ie;var X=require_enum(),a=requireTypes(),te=requireUtil();function ne(Q,q,W,re){return q.resolvedType.group?Q("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",W,re,(q.id<<3|3)>>>0,(q.id<<3|4)>>>0):Q("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",W,re,(q.id<<3|2)>>>0)}function ie(Q){for(var q=te.codegen(["m","w"],Q.name+"$encode")("if(!w)")("w=Writer.create()"),W,re,ee=Q.fieldsArray.slice().sort(te.compareFieldsById),W=0;W<ee.length;++W){var oe=ee[W].resolve(),se=Q._fieldsArray.indexOf(oe),ue=oe.resolvedType instanceof X?"int32":oe.type,ae=a.basic[ue];re="m"+te.safeProp(oe.name),oe.map?(q("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",re,oe.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",re)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(oe.id<<3|2)>>>0,8|a.mapKey[oe.keyType],oe.keyType),ae===void 0?q("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",se,re):q(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|ae,ue,re),q("}")("}")):oe.repeated?(q("if(%s!=null&&%s.length){",re,re),oe.packed&&a.packed[ue]!==void 0?q("w.uint32(%i).fork()",(oe.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",re)("w.%s(%s[i])",ue,re)("w.ldelim()"):(q("for(var i=0;i<%s.length;++i)",re),ae===void 0?ne(q,oe,se,re+"[i]"):q("w.uint32(%i).%s(%s[i])",(oe.id<<3|ae)>>>0,ue,re)),q("}")):(oe.optional&&q("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",re,oe.name),ae===void 0?ne(q,oe,se,re):q("w.uint32(%i).%s(%s)",(oe.id<<3|ae)>>>0,ue,re))}return q("return w")}return encoder_1}(function(X){var a=X.exports=indexMinimal;a.build="light";function te(ie,Q,q){return typeof Q=="function"?(q=Q,Q=new a.Root):Q||(Q=new a.Root),Q.load(ie,q)}a.load=te;function ne(ie,Q){return Q||(Q=new a.Root),Q.loadSync(ie)}a.loadSync=ne,a.encoder=requireEncoder(),a.decoder=requireDecoder(),a.verifier=requireVerifier(),a.converter=requireConverter(),a.ReflectionObject=requireObject(),a.Namespace=requireNamespace(),a.Root=requireRoot(),a.Enum=require_enum(),a.Type=requireType(),a.Field=requireField(),a.OneOf=requireOneof(),a.MapField=requireMapfield(),a.Service=requireService(),a.Method=requireMethod(),a.Message=message,a.wrappers=wrappers,a.types=requireTypes(),a.util=requireUtil(),a.ReflectionObject._configure(a.Root),a.Namespace._configure(a.Type,a.Service,a.Enum),a.Root._configure(a.Type),a.Field._configure(a.Type)})(indexLight),function(X){X.exports=indexLight.exports}(light);var x=getDefaultExportFromCjs(light.exports);/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(X){}function Long(X,a,te){this.low=X|0,this.high=a|0,this.unsigned=!!te}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(X){return(X&&X.__isLong__)===!0}function ctz32(X){var a=Math.clz32(X&-X);return X?31-a:a}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(X,a){var te,ne,ie;return a?(X>>>=0,(ie=0<=X&&X<256)&&(ne=UINT_CACHE[X],ne)?ne:(te=fromBits(X,0,!0),ie&&(UINT_CACHE[X]=te),te)):(X|=0,(ie=-128<=X&&X<128)&&(ne=INT_CACHE[X],ne)?ne:(te=fromBits(X,X<0?-1:0,!1),ie&&(INT_CACHE[X]=te),te))}Long.fromInt=fromInt;function fromNumber(X,a){if(isNaN(X))return a?UZERO:ZERO;if(a){if(X<0)return UZERO;if(X>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(X<=-TWO_PWR_63_DBL)return MIN_VALUE;if(X+1>=TWO_PWR_63_DBL)return MAX_VALUE}return X<0?fromNumber(-X,a).neg():fromBits(X%TWO_PWR_32_DBL|0,X/TWO_PWR_32_DBL|0,a)}Long.fromNumber=fromNumber;function fromBits(X,a,te){return new Long(X,a,te)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(X,a,te){if(X.length===0)throw Error("empty string");if(typeof a=="number"?(te=a,a=!1):a=!!a,X==="NaN"||X==="Infinity"||X==="+Infinity"||X==="-Infinity")return a?UZERO:ZERO;if(te=te||10,te<2||36<te)throw RangeError("radix");var ne;if((ne=X.indexOf("-"))>0)throw Error("interior hyphen");if(ne===0)return fromString(X.substring(1),a,te).neg();for(var ie=fromNumber(pow_dbl(te,8)),Q=ZERO,q=0;q<X.length;q+=8){var W=Math.min(8,X.length-q),re=parseInt(X.substring(q,q+W),te);if(W<8){var ee=fromNumber(pow_dbl(te,W));Q=Q.mul(ee).add(fromNumber(re))}else Q=Q.mul(ie),Q=Q.add(fromNumber(re))}return Q.unsigned=a,Q}Long.fromString=fromString;function fromValue(X,a){return typeof X=="number"?fromNumber(X,a):typeof X=="string"?fromString(X,a):fromBits(X.low,X.high,typeof a=="boolean"?a:X.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function X(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function X(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function X(a){if(a=a||10,a<2||36<a)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var te=fromNumber(a),ne=this.div(te),ie=ne.mul(te).sub(this);return ne.toString(a)+ie.toInt().toString(a)}else return"-"+this.neg().toString(a);for(var Q=fromNumber(pow_dbl(a,6),this.unsigned),q=this,W="";;){var re=q.div(Q),ee=q.sub(re.mul(Q)).toInt()>>>0,oe=ee.toString(a);if(q=re,q.isZero())return oe+W;for(;oe.length<6;)oe="0"+oe;W=""+oe+W}},LongPrototype.getHighBits=function X(){return this.high},LongPrototype.getHighBitsUnsigned=function X(){return this.high>>>0},LongPrototype.getLowBits=function X(){return this.low},LongPrototype.getLowBitsUnsigned=function X(){return this.low>>>0},LongPrototype.getNumBitsAbs=function X(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var a=this.high!=0?this.high:this.low,te=31;te>0&&(a&1<<te)==0;te--);return this.high!=0?te+33:te+1},LongPrototype.isZero=function X(){return this.high===0&&this.low===0},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function X(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function X(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function X(){return(this.low&1)===1},LongPrototype.isEven=function X(){return(this.low&1)===0},LongPrototype.equals=function X(a){return isLong(a)||(a=fromValue(a)),this.unsigned!==a.unsigned&&this.high>>>31===1&&a.high>>>31===1?!1:this.high===a.high&&this.low===a.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function X(a){return!this.eq(a)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function X(a){return this.comp(a)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function X(a){return this.comp(a)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function X(a){return this.comp(a)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function X(a){return this.comp(a)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function X(a){if(isLong(a)||(a=fromValue(a)),this.eq(a))return 0;var te=this.isNegative(),ne=a.isNegative();return te&&!ne?-1:!te&&ne?1:this.unsigned?a.high>>>0>this.high>>>0||a.high===this.high&&a.low>>>0>this.low>>>0?-1:1:this.sub(a).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function X(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function X(a){isLong(a)||(a=fromValue(a));var te=this.high>>>16,ne=this.high&65535,ie=this.low>>>16,Q=this.low&65535,q=a.high>>>16,W=a.high&65535,re=a.low>>>16,ee=a.low&65535,oe=0,se=0,ue=0,ae=0;return ae+=Q+ee,ue+=ae>>>16,ae&=65535,ue+=ie+re,se+=ue>>>16,ue&=65535,se+=ne+W,oe+=se>>>16,se&=65535,oe+=te+q,oe&=65535,fromBits(ue<<16|ae,oe<<16|se,this.unsigned)},LongPrototype.subtract=function X(a){return isLong(a)||(a=fromValue(a)),this.add(a.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function X(a){if(this.isZero())return this;if(isLong(a)||(a=fromValue(a)),wasm){var te=wasm.mul(this.low,this.high,a.low,a.high);return fromBits(te,wasm.get_high(),this.unsigned)}if(a.isZero())return this.unsigned?UZERO:ZERO;if(this.eq(MIN_VALUE))return a.isOdd()?MIN_VALUE:ZERO;if(a.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return a.isNegative()?this.neg().mul(a.neg()):this.neg().mul(a).neg();if(a.isNegative())return this.mul(a.neg()).neg();if(this.lt(TWO_PWR_24)&&a.lt(TWO_PWR_24))return fromNumber(this.toNumber()*a.toNumber(),this.unsigned);var ne=this.high>>>16,ie=this.high&65535,Q=this.low>>>16,q=this.low&65535,W=a.high>>>16,re=a.high&65535,ee=a.low>>>16,oe=a.low&65535,se=0,ue=0,ae=0,fe=0;return fe+=q*oe,ae+=fe>>>16,fe&=65535,ae+=Q*oe,ue+=ae>>>16,ae&=65535,ae+=q*ee,ue+=ae>>>16,ae&=65535,ue+=ie*oe,se+=ue>>>16,ue&=65535,ue+=Q*ee,se+=ue>>>16,ue&=65535,ue+=q*re,se+=ue>>>16,ue&=65535,se+=ne*oe+ie*ee+Q*re+q*W,se&=65535,fromBits(ae<<16|fe,se<<16|ue,this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function X(a){if(isLong(a)||(a=fromValue(a)),a.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&a.low===-1&&a.high===-1)return this;var te=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,a.low,a.high);return fromBits(te,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var ne,ie,Q;if(this.unsigned){if(a.unsigned||(a=a.toUnsigned()),a.gt(this))return UZERO;if(a.gt(this.shru(1)))return UONE;Q=UZERO}else{if(this.eq(MIN_VALUE)){if(a.eq(ONE)||a.eq(NEG_ONE))return MIN_VALUE;if(a.eq(MIN_VALUE))return ONE;var q=this.shr(1);return ne=q.div(a).shl(1),ne.eq(ZERO)?a.isNegative()?ONE:NEG_ONE:(ie=this.sub(a.mul(ne)),Q=ne.add(ie.div(a)),Q)}else if(a.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return a.isNegative()?this.neg().div(a.neg()):this.neg().div(a).neg();if(a.isNegative())return this.div(a.neg()).neg();Q=ZERO}for(ie=this;ie.gte(a);){ne=Math.max(1,Math.floor(ie.toNumber()/a.toNumber()));for(var W=Math.ceil(Math.log(ne)/Math.LN2),re=W<=48?1:pow_dbl(2,W-48),ee=fromNumber(ne),oe=ee.mul(a);oe.isNegative()||oe.gt(ie);)ne-=re,ee=fromNumber(ne,this.unsigned),oe=ee.mul(a);ee.isZero()&&(ee=ONE),Q=Q.add(ee),ie=ie.sub(oe)}return Q},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function X(a){if(isLong(a)||(a=fromValue(a)),wasm){var te=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,a.low,a.high);return fromBits(te,wasm.get_high(),this.unsigned)}return this.sub(this.div(a).mul(a))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function X(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.countLeadingZeros=function X(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},LongPrototype.clz=LongPrototype.countLeadingZeros,LongPrototype.countTrailingZeros=function X(){return this.low?ctz32(this.low):ctz32(this.high)+32},LongPrototype.ctz=LongPrototype.countTrailingZeros,LongPrototype.and=function X(a){return isLong(a)||(a=fromValue(a)),fromBits(this.low&a.low,this.high&a.high,this.unsigned)},LongPrototype.or=function X(a){return isLong(a)||(a=fromValue(a)),fromBits(this.low|a.low,this.high|a.high,this.unsigned)},LongPrototype.xor=function X(a){return isLong(a)||(a=fromValue(a)),fromBits(this.low^a.low,this.high^a.high,this.unsigned)},LongPrototype.shiftLeft=function X(a){return isLong(a)&&(a=a.toInt()),(a&=63)===0?this:a<32?fromBits(this.low<<a,this.high<<a|this.low>>>32-a,this.unsigned):fromBits(0,this.low<<a-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function X(a){return isLong(a)&&(a=a.toInt()),(a&=63)===0?this:a<32?fromBits(this.low>>>a|this.high<<32-a,this.high>>a,this.unsigned):fromBits(this.high>>a-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function X(a){return isLong(a)&&(a=a.toInt()),(a&=63)===0?this:a<32?fromBits(this.low>>>a|this.high<<32-a,this.high>>>a,this.unsigned):a===32?fromBits(this.high,0,this.unsigned):fromBits(this.high>>>a-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.rotateLeft=function X(a){var te;return isLong(a)&&(a=a.toInt()),(a&=63)===0?this:a===32?fromBits(this.high,this.low,this.unsigned):a<32?(te=32-a,fromBits(this.low<<a|this.high>>>te,this.high<<a|this.low>>>te,this.unsigned)):(a-=32,te=32-a,fromBits(this.high<<a|this.low>>>te,this.low<<a|this.high>>>te,this.unsigned))},LongPrototype.rotl=LongPrototype.rotateLeft,LongPrototype.rotateRight=function X(a){var te;return isLong(a)&&(a=a.toInt()),(a&=63)===0?this:a===32?fromBits(this.high,this.low,this.unsigned):a<32?(te=32-a,fromBits(this.high<<te|this.low>>>a,this.low<<te|this.high>>>a,this.unsigned)):(a-=32,te=32-a,fromBits(this.low<<te|this.high>>>a,this.high<<te|this.low>>>a,this.unsigned))},LongPrototype.rotr=LongPrototype.rotateRight,LongPrototype.toSigned=function X(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function X(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function X(a){return a?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function X(){var a=this.high,te=this.low;return[te&255,te>>>8&255,te>>>16&255,te>>>24,a&255,a>>>8&255,a>>>16&255,a>>>24]},LongPrototype.toBytesBE=function X(){var a=this.high,te=this.low;return[a>>>24,a>>>16&255,a>>>8&255,a&255,te>>>24,te>>>16&255,te>>>8&255,te&255]},Long.fromBytes=function X(a,te,ne){return ne?Long.fromBytesLE(a,te):Long.fromBytesBE(a,te)},Long.fromBytesLE=function X(a,te){return new Long(a[0]|a[1]<<8|a[2]<<16|a[3]<<24,a[4]|a[5]<<8|a[6]<<16|a[7]<<24,te)},Long.fromBytesBE=function X(a,te){return new Long(a[4]<<24|a[5]<<16|a[6]<<8|a[7],a[0]<<24|a[1]<<16|a[2]<<8|a[3],te)};var g=Object.defineProperty,m=Object.getOwnPropertyDescriptor,i=(X,a,te,ne)=>{for(var ie=ne>1?void 0:ne?m(a,te):a,Q=X.length-1,q;Q>=0;Q--)(q=X[Q])&&(ie=(ne?q(a,te,ie):q(ie))||ie);return ne&&ie&&g(a,te,ie),ie};const{Message:d,Field:t,Type:n}=x;let BrokenBackupHistory=class extends d{};i([t.d(0,"string","required")],BrokenBackupHistory.prototype,"url",2),i([t.d(1,"int64","required")],BrokenBackupHistory.prototype,"lastRead",2),BrokenBackupHistory=i([n.d()],BrokenBackupHistory);let BackupHistory=class extends d{};i([t.d(1,"string","required")],BackupHistory.prototype,"url",2),i([t.d(2,"int64","required")],BackupHistory.prototype,"lastRead",2),BackupHistory=i([n.d()],BackupHistory);let BrokenBackupSource=class extends d{constructor(){super(...arguments),this.name=""}};i([t.d(0,"string","optional")],BrokenBackupSource.prototype,"name",2),i([t.d(1,"int64","required")],BrokenBackupSource.prototype,"sourceId",2),BrokenBackupSource=i([n.d()],BrokenBackupSource);let BackupSource=class extends d{constructor(){super(...arguments),this.name=""}};i([t.d(1,"string","optional")],BackupSource.prototype,"name",2),i([t.d(2,"int64","required")],BackupSource.prototype,"sourceId",2),BackupSource=i([n.d()],BackupSource);let BackupCategory=class extends d{constructor(){super(...arguments),this.order=new Long(0),this.flags=new Long(0)}};i([t.d(1,"string","required")],BackupCategory.prototype,"name",2),i([t.d(2,"int64","optional")],BackupCategory.prototype,"order",2),i([t.d(100,"int64","optional")],BackupCategory.prototype,"flags",2),BackupCategory=i([n.d()],BackupCategory);let BackupChapter=class extends d{constructor(){super(...arguments),this.read=!1,this.bookmark=!1,this.lastPageRead=0,this.dateFetch=new Long(0),this.dateUpload=new Long(0),this.chapterNumber=0,this.sourceOrder=0}};i([t.d(1,"string","required")],BackupChapter.prototype,"url",2),i([t.d(2,"string","required")],BackupChapter.prototype,"name",2),i([t.d(3,"string","optional")],BackupChapter.prototype,"scanlator",2),i([t.d(4,"bool","optional")],BackupChapter.prototype,"read",2),i([t.d(5,"bool","optional")],BackupChapter.prototype,"bookmark",2),i([t.d(6,"int32","optional")],BackupChapter.prototype,"lastPageRead",2),i([t.d(7,"int64","optional")],BackupChapter.prototype,"dateFetch",2),i([t.d(8,"int64","optional")],BackupChapter.prototype,"dateUpload",2),i([t.d(9,"float","optional")],BackupChapter.prototype,"chapterNumber",2),i([t.d(10,"int32","optional")],BackupChapter.prototype,"sourceOrder",2),BackupChapter=i([n.d()],BackupChapter);let BackupTracking=class extends d{constructor(){super(...arguments),this.mediaIdInt=0,this.trackingUrl="",this.title="",this.lastChapterRead=0,this.totalChapters=0,this.score=0,this.status=0,this.startedReadingDate=new Long(0),this.finishedReadingDate=new Long(0),this.mediaId=new Long(0)}};i([t.d(1,"int32","required")],BackupTracking.prototype,"syncId",2),i([t.d(2,"int64","required")],BackupTracking.prototype,"libraryId",2),i([t.d(3,"int32","optional")],BackupTracking.prototype,"mediaIdInt",2),i([t.d(4,"string","optional")],BackupTracking.prototype,"trackingUrl",2),i([t.d(5,"string","optional")],BackupTracking.prototype,"title",2),i([t.d(6,"float","optional")],BackupTracking.prototype,"lastChapterRead",2),i([t.d(7,"int32","optional")],BackupTracking.prototype,"totalChapters",2),i([t.d(8,"float","optional")],BackupTracking.prototype,"score",2),i([t.d(9,"int32","optional")],BackupTracking.prototype,"status",2),i([t.d(10,"int64","optional")],BackupTracking.prototype,"startedReadingDate",2),i([t.d(11,"int64","optional")],BackupTracking.prototype,"finishedReadingDate",2),i([t.d(100,"int64","optional")],BackupTracking.prototype,"mediaId",2),BackupTracking=i([n.d()],BackupTracking);let BackupManga=class extends d{constructor(){super(...arguments),this.title="",this.genre=[],this.status=0,this.dateAdded=new Long(0),this.viewer=0,this.chapters=[],this.categories=[],this.tracking=[],this.favorite=!1,this.chapterFlags=0,this.brokenHistory=[],this.history=[]}};i([t.d(1,"int64","required")],BackupManga.prototype,"source",2),i([t.d(2,"string","required")],BackupManga.prototype,"url",2),i([t.d(3,"string","optional")],BackupManga.prototype,"title",2),i([t.d(4,"string","optional")],BackupManga.prototype,"artist",2),i([t.d(5,"string","optional")],BackupManga.prototype,"author",2),i([t.d(6,"string","optional")],BackupManga.prototype,"description",2),i([t.d(7,"string","repeated")],BackupManga.prototype,"genre",2),i([t.d(8,"int32","optional")],BackupManga.prototype,"status",2),i([t.d(9,"string","optional")],BackupManga.prototype,"thumbnailUrl",2),i([t.d(13,"int64","optional")],BackupManga.prototype,"dateAdded",2),i([t.d(14,"int32","optional")],BackupManga.prototype,"viewer",2),i([t.d(16,BackupChapter,"repeated")],BackupManga.prototype,"chapters",2),i([t.d(17,"int64","repeated")],BackupManga.prototype,"categories",2),i([t.d(18,BackupTracking,"repeated")],BackupManga.prototype,"tracking",2),i([t.d(100,"bool","optional")],BackupManga.prototype,"favorite",2),i([t.d(101,"int32","optional")],BackupManga.prototype,"chapterFlags",2),i([t.d(102,BrokenBackupHistory,"repeated")],BackupManga.prototype,"brokenHistory",2),i([t.d(103,"int32","optional")],BackupManga.prototype,"viewerFlags",2),i([t.d(104,BackupHistory,"repeated")],BackupManga.prototype,"history",2),BackupManga=i([n.d()],BackupManga);let Backup=class extends d{constructor(){super(...arguments),this.backupManga=[],this.backupCategories=[],this.backupBrokenSources=[],this.backupSources=[]}};i([t.d(1,BackupManga,"repeated")],Backup.prototype,"backupManga",2),i([t.d(2,BackupCategory,"repeated")],Backup.prototype,"backupCategories",2),i([t.d(100,BrokenBackupSource,"repeated")],Backup.prototype,"backupBrokenSources",2),i([t.d(101,BackupSource,"repeated")],Backup.prototype,"backupSources",2),Backup=i([n.d()],Backup);const S={1:"myanimelist",2:"anilist"};function toAidoku(X){const a=new Date(Date.now()).toISOString().split("T")[0],te=Backup.decode(X),ne=Object.fromEntries(te.backupCategories.map(W=>[W.order.toString(),W.name])),ie={library:[],history:[],sources:[],manga:[],chapters:[],trackItems:[],categories:te.backupCategories.map(W=>W.name),date:Math.floor(Date.now()/1e3),name:`Converted Tachiyomi Backup ${a}`,version:"0.0.1"},Q=new Set,q=new Set;return te.backupManga.forEach(W=>{const re=f.find(oe=>oe.tachiyomiSourceId===W.source.toString());if(!re){Q.add(W.source.toString());return}q.add(re.aidokuSourceId);const ee=re.parseMangaObject(W);ie.manga.push(ee),ie.library.push({mangaId:ee.id,lastUpdated:0,categories:W.categories.map(oe=>ne[oe.toString()]).filter(oe=>oe!==void 0),dateAdded:Math.floor(W.dateAdded.divide(1e3).toNumber()),sourceId:re.aidokuSourceId,lastOpened:0}),W.chapters.forEach(oe=>{var se,ue,ae;const fe=re.parseChapterObject(W,oe);ie.chapters.push(fe),ie.history.push({progress:oe.lastPageRead,mangaId:ee.id,chapterId:fe.id,completed:oe.read,sourceId:re.aidokuSourceId,dateRead:Math.floor((ae=(ue=(se=[...W.history,...W.brokenHistory].find(he=>he.url===oe.url))==null?void 0:se.lastRead)==null?void 0:ue.divide(1e3).toNumber())!=null?ae:0)})}),ie.trackItems.push(...W.tracking.filter(oe=>oe.syncId<=2).map(oe=>({id:oe.trackingUrl.split("/")[4],trackerId:S[oe.syncId],mangaId:ee.id,sourceId:re.aidokuSourceId,title:ee.title})))}),Q.size>0&&console.log(`Could not find converters for ${Q.size} sources. Your library may not be complete.
- ${[...Q].join(`
- `)}`),ie.sources=[...q],{backup:ie,dateString:a}}return exports.toAidoku=toAidoku,Object.defineProperty(exports,"__esModule",{value:!0}),exports}({});
