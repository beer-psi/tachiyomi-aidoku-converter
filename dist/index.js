var Tachidoku=function(exports){"use strict";/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(h){}function Long(h,r,m){this.low=h|0,this.high=r|0,this.unsigned=!!m}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(h){return(h&&h.__isLong__)===!0}function ctz32(h){var r=Math.clz32(h&-h);return h?31-r:r}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(h,r){var m,w,v;return r?(h>>>=0,(v=0<=h&&h<256)&&(w=UINT_CACHE[h],w)?w:(m=fromBits(h,0,!0),v&&(UINT_CACHE[h]=m),m)):(h|=0,(v=-128<=h&&h<128)&&(w=INT_CACHE[h],w)?w:(m=fromBits(h,h<0?-1:0,!1),v&&(INT_CACHE[h]=m),m))}Long.fromInt=fromInt;function fromNumber(h,r){if(isNaN(h))return r?UZERO:ZERO;if(r){if(h<0)return UZERO;if(h>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(h<=-TWO_PWR_63_DBL)return MIN_VALUE;if(h+1>=TWO_PWR_63_DBL)return MAX_VALUE}return h<0?fromNumber(-h,r).neg():fromBits(h%TWO_PWR_32_DBL|0,h/TWO_PWR_32_DBL|0,r)}Long.fromNumber=fromNumber;function fromBits(h,r,m){return new Long(h,r,m)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(h,r,m){if(h.length===0)throw Error("empty string");if(typeof r=="number"?(m=r,r=!1):r=!!r,h==="NaN"||h==="Infinity"||h==="+Infinity"||h==="-Infinity")return r?UZERO:ZERO;if(m=m||10,m<2||36<m)throw RangeError("radix");var w;if((w=h.indexOf("-"))>0)throw Error("interior hyphen");if(w===0)return fromString(h.substring(1),r,m).neg();for(var v=fromNumber(pow_dbl(m,8)),p=ZERO,n=0;n<h.length;n+=8){var f=Math.min(8,h.length-n),_=parseInt(h.substring(n,n+f),m);if(f<8){var d=fromNumber(pow_dbl(m,f));p=p.mul(d).add(fromNumber(_))}else p=p.mul(v),p=p.add(fromNumber(_))}return p.unsigned=r,p}Long.fromString=fromString;function fromValue(h,r){return typeof h=="number"?fromNumber(h,r):typeof h=="string"?fromString(h,r):fromBits(h.low,h.high,typeof r=="boolean"?r:h.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(r){if(r=r||10,r<2||36<r)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var m=fromNumber(r),w=this.div(m),v=w.mul(m).sub(this);return w.toString(r)+v.toInt().toString(r)}else return"-"+this.neg().toString(r);for(var p=fromNumber(pow_dbl(r,6),this.unsigned),n=this,f="";;){var _=n.div(p),d=n.sub(_.mul(p)).toInt()>>>0,g=d.toString(r);if(n=_,n.isZero())return g+f;for(;g.length<6;)g="0"+g;f=""+g+f}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var r=this.high!=0?this.high:this.low,m=31;m>0&&(r&1<<m)==0;m--);return this.high!=0?m+33:m+1},LongPrototype.isZero=function(){return this.high===0&&this.low===0},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return(this.low&1)===1},LongPrototype.isEven=function(){return(this.low&1)===0},LongPrototype.equals=function(r){return isLong(r)||(r=fromValue(r)),this.unsigned!==r.unsigned&&this.high>>>31===1&&r.high>>>31===1?!1:this.high===r.high&&this.low===r.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(r){return!this.eq(r)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(r){return this.comp(r)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(r){return this.comp(r)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(r){return this.comp(r)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(r){return this.comp(r)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(r){if(isLong(r)||(r=fromValue(r)),this.eq(r))return 0;var m=this.isNegative(),w=r.isNegative();return m&&!w?-1:!m&&w?1:this.unsigned?r.high>>>0>this.high>>>0||r.high===this.high&&r.low>>>0>this.low>>>0?-1:1:this.sub(r).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(r){isLong(r)||(r=fromValue(r));var m=this.high>>>16,w=this.high&65535,v=this.low>>>16,p=this.low&65535,n=r.high>>>16,f=r.high&65535,_=r.low>>>16,d=r.low&65535,g=0,O=0,R=0,L=0;return L+=p+d,R+=L>>>16,L&=65535,R+=v+_,O+=R>>>16,R&=65535,O+=w+f,g+=O>>>16,O&=65535,g+=m+n,g&=65535,fromBits(R<<16|L,g<<16|O,this.unsigned)},LongPrototype.subtract=function(r){return isLong(r)||(r=fromValue(r)),this.add(r.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(r){if(this.isZero())return this;if(isLong(r)||(r=fromValue(r)),wasm){var m=wasm.mul(this.low,this.high,r.low,r.high);return fromBits(m,wasm.get_high(),this.unsigned)}if(r.isZero())return this.unsigned?UZERO:ZERO;if(this.eq(MIN_VALUE))return r.isOdd()?MIN_VALUE:ZERO;if(r.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return r.isNegative()?this.neg().mul(r.neg()):this.neg().mul(r).neg();if(r.isNegative())return this.mul(r.neg()).neg();if(this.lt(TWO_PWR_24)&&r.lt(TWO_PWR_24))return fromNumber(this.toNumber()*r.toNumber(),this.unsigned);var w=this.high>>>16,v=this.high&65535,p=this.low>>>16,n=this.low&65535,f=r.high>>>16,_=r.high&65535,d=r.low>>>16,g=r.low&65535,O=0,R=0,L=0,F=0;return F+=n*g,L+=F>>>16,F&=65535,L+=p*g,R+=L>>>16,L&=65535,L+=n*d,R+=L>>>16,L&=65535,R+=v*g,O+=R>>>16,R&=65535,R+=p*d,O+=R>>>16,R&=65535,R+=n*_,O+=R>>>16,R&=65535,O+=w*g+v*d+p*_+n*f,O&=65535,fromBits(L<<16|F,O<<16|R,this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(r){if(isLong(r)||(r=fromValue(r)),r.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&r.low===-1&&r.high===-1)return this;var m=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,r.low,r.high);return fromBits(m,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var w,v,p;if(this.unsigned){if(r.unsigned||(r=r.toUnsigned()),r.gt(this))return UZERO;if(r.gt(this.shru(1)))return UONE;p=UZERO}else{if(this.eq(MIN_VALUE)){if(r.eq(ONE)||r.eq(NEG_ONE))return MIN_VALUE;if(r.eq(MIN_VALUE))return ONE;var n=this.shr(1);return w=n.div(r).shl(1),w.eq(ZERO)?r.isNegative()?ONE:NEG_ONE:(v=this.sub(r.mul(w)),p=w.add(v.div(r)),p)}else if(r.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return r.isNegative()?this.neg().div(r.neg()):this.neg().div(r).neg();if(r.isNegative())return this.div(r.neg()).neg();p=ZERO}for(v=this;v.gte(r);){w=Math.max(1,Math.floor(v.toNumber()/r.toNumber()));for(var f=Math.ceil(Math.log(w)/Math.LN2),_=f<=48?1:pow_dbl(2,f-48),d=fromNumber(w),g=d.mul(r);g.isNegative()||g.gt(v);)w-=_,d=fromNumber(w,this.unsigned),g=d.mul(r);d.isZero()&&(d=ONE),p=p.add(d),v=v.sub(g)}return p},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(r){if(isLong(r)||(r=fromValue(r)),wasm){var m=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,r.low,r.high);return fromBits(m,wasm.get_high(),this.unsigned)}return this.sub(this.div(r).mul(r))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},LongPrototype.clz=LongPrototype.countLeadingZeros,LongPrototype.countTrailingZeros=function(){return this.low?ctz32(this.low):ctz32(this.high)+32},LongPrototype.ctz=LongPrototype.countTrailingZeros,LongPrototype.and=function(r){return isLong(r)||(r=fromValue(r)),fromBits(this.low&r.low,this.high&r.high,this.unsigned)},LongPrototype.or=function(r){return isLong(r)||(r=fromValue(r)),fromBits(this.low|r.low,this.high|r.high,this.unsigned)},LongPrototype.xor=function(r){return isLong(r)||(r=fromValue(r)),fromBits(this.low^r.low,this.high^r.high,this.unsigned)},LongPrototype.shiftLeft=function(r){return isLong(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?fromBits(this.low<<r,this.high<<r|this.low>>>32-r,this.unsigned):fromBits(0,this.low<<r-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(r){return isLong(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?fromBits(this.low>>>r|this.high<<32-r,this.high>>r,this.unsigned):fromBits(this.high>>r-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(r){return isLong(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?fromBits(this.low>>>r|this.high<<32-r,this.high>>>r,this.unsigned):r===32?fromBits(this.high,0,this.unsigned):fromBits(this.high>>>r-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.rotateLeft=function(r){var m;return isLong(r)&&(r=r.toInt()),(r&=63)===0?this:r===32?fromBits(this.high,this.low,this.unsigned):r<32?(m=32-r,fromBits(this.low<<r|this.high>>>m,this.high<<r|this.low>>>m,this.unsigned)):(r-=32,m=32-r,fromBits(this.high<<r|this.low>>>m,this.low<<r|this.high>>>m,this.unsigned))},LongPrototype.rotl=LongPrototype.rotateLeft,LongPrototype.rotateRight=function(r){var m;return isLong(r)&&(r=r.toInt()),(r&=63)===0?this:r===32?fromBits(this.high,this.low,this.unsigned):r<32?(m=32-r,fromBits(this.high<<m|this.low>>>r,this.low<<m|this.high>>>r,this.unsigned)):(r-=32,m=32-r,fromBits(this.low<<m|this.high>>>r,this.high<<m|this.low>>>r,this.unsigned))},LongPrototype.rotr=LongPrototype.rotateRight,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(r){return r?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var r=this.high,m=this.low;return[m&255,m>>>8&255,m>>>16&255,m>>>24,r&255,r>>>8&255,r>>>16&255,r>>>24]},LongPrototype.toBytesBE=function(){var r=this.high,m=this.low;return[r>>>24,r>>>16&255,r>>>8&255,r&255,m>>>24,m>>>16&255,m>>>8&255,m&255]},Long.fromBytes=function(r,m,w){return w?Long.fromBytesLE(r,m):Long.fromBytesBE(r,m)},Long.fromBytesLE=function(r,m){return new Long(r[0]|r[1]<<8|r[2]<<16|r[3]<<24,r[4]|r[5]<<8|r[6]<<16|r[7]<<24,m)},Long.fromBytesBE=function(r,m){return new Long(r[4]<<24|r[5]<<16|r[6]<<8|r[7],r[0]<<24|r[1]<<16|r[2]<<8|r[3],m)};var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var light={exports:{}},indexLight={exports:{}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=h;function h(r,m){for(var w=new Array(arguments.length-1),v=0,p=2,n=!0;p<arguments.length;)w[v++]=arguments[p++];return new Promise(function(_,d){w[v]=function(O){if(n)if(n=!1,O)d(O);else{for(var R=new Array(arguments.length-1),L=0;L<R.length;)R[L++]=arguments[L];_.apply(null,R)}};try{r.apply(m||null,w)}catch(g){n&&(n=!1,d(g))}})}return aspromise}var base64$1={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(h){var r=h;r.length=function(f){var _=f.length;if(!_)return 0;for(var d=0;--_%4>1&&f.charAt(_)==="=";)++d;return Math.ceil(f.length*3)/4-d};for(var m=new Array(64),w=new Array(123),v=0;v<64;)w[m[v]=v<26?v+65:v<52?v+71:v<62?v-4:v-59|43]=v++;r.encode=function(f,_,d){for(var g=null,O=[],R=0,L=0,F;_<d;){var E=f[_++];switch(L){case 0:O[R++]=m[E>>2],F=(E&3)<<4,L=1;break;case 1:O[R++]=m[F|E>>4],F=(E&15)<<2,L=2;break;case 2:O[R++]=m[F|E>>6],O[R++]=m[E&63],L=0;break}R>8191&&((g||(g=[])).push(String.fromCharCode.apply(String,O)),R=0)}return L&&(O[R++]=m[F],O[R++]=61,L===1&&(O[R++]=61)),g?(R&&g.push(String.fromCharCode.apply(String,O.slice(0,R))),g.join("")):String.fromCharCode.apply(String,O.slice(0,R))};var p="invalid encoding";r.decode=function(f,_,d){for(var g=d,O=0,R,L=0;L<f.length;){var F=f.charCodeAt(L++);if(F===61&&O>1)break;if((F=w[F])===void 0)throw Error(p);switch(O){case 0:R=F,O=1;break;case 1:_[d++]=R<<2|(F&48)>>4,R=F,O=2;break;case 2:_[d++]=(R&15)<<4|(F&60)>>2,R=F,O=3;break;case 3:_[d++]=(R&3)<<6|F,O=0;break}}if(O===1)throw Error(p);return d-g},r.test=function(f){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(f)}}(base64$1)),base64$1}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=h;function h(){this._listeners={}}return h.prototype.on=function(m,w,v){return(this._listeners[m]||(this._listeners[m]=[])).push({fn:w,ctx:v||this}),this},h.prototype.off=function(m,w){if(m===void 0)this._listeners={};else if(w===void 0)this._listeners[m]=[];else for(var v=this._listeners[m],p=0;p<v.length;)v[p].fn===w?v.splice(p,1):++p;return this},h.prototype.emit=function(m){var w=this._listeners[m];if(w){for(var v=[],p=1;p<arguments.length;)v.push(arguments[p++]);for(p=0;p<w.length;)w[p].fn.apply(w[p++].ctx,v)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=h(h);function h(p){return typeof Float32Array!="undefined"?function(){var n=new Float32Array([-0]),f=new Uint8Array(n.buffer),_=f[3]===128;function d(L,F,E){n[0]=L,F[E]=f[0],F[E+1]=f[1],F[E+2]=f[2],F[E+3]=f[3]}function g(L,F,E){n[0]=L,F[E]=f[3],F[E+1]=f[2],F[E+2]=f[1],F[E+3]=f[0]}p.writeFloatLE=_?d:g,p.writeFloatBE=_?g:d;function O(L,F){return f[0]=L[F],f[1]=L[F+1],f[2]=L[F+2],f[3]=L[F+3],n[0]}function R(L,F){return f[3]=L[F],f[2]=L[F+1],f[1]=L[F+2],f[0]=L[F+3],n[0]}p.readFloatLE=_?O:R,p.readFloatBE=_?R:O}():function(){function n(_,d,g,O){var R=d<0?1:0;if(R&&(d=-d),d===0)_(1/d>0?0:2147483648,g,O);else if(isNaN(d))_(2143289344,g,O);else if(d>34028234663852886e22)_((R<<31|2139095040)>>>0,g,O);else if(d<11754943508222875e-54)_((R<<31|Math.round(d/1401298464324817e-60))>>>0,g,O);else{var L=Math.floor(Math.log(d)/Math.LN2),F=Math.round(d*Math.pow(2,-L)*8388608)&8388607;_((R<<31|L+127<<23|F)>>>0,g,O)}}p.writeFloatLE=n.bind(null,r),p.writeFloatBE=n.bind(null,m);function f(_,d,g){var O=_(d,g),R=(O>>31)*2+1,L=O>>>23&255,F=O&8388607;return L===255?F?NaN:R*(1/0):L===0?R*1401298464324817e-60*F:R*Math.pow(2,L-150)*(F+8388608)}p.readFloatLE=f.bind(null,w),p.readFloatBE=f.bind(null,v)}(),typeof Float64Array!="undefined"?function(){var n=new Float64Array([-0]),f=new Uint8Array(n.buffer),_=f[7]===128;function d(L,F,E){n[0]=L,F[E]=f[0],F[E+1]=f[1],F[E+2]=f[2],F[E+3]=f[3],F[E+4]=f[4],F[E+5]=f[5],F[E+6]=f[6],F[E+7]=f[7]}function g(L,F,E){n[0]=L,F[E]=f[7],F[E+1]=f[6],F[E+2]=f[5],F[E+3]=f[4],F[E+4]=f[3],F[E+5]=f[2],F[E+6]=f[1],F[E+7]=f[0]}p.writeDoubleLE=_?d:g,p.writeDoubleBE=_?g:d;function O(L,F){return f[0]=L[F],f[1]=L[F+1],f[2]=L[F+2],f[3]=L[F+3],f[4]=L[F+4],f[5]=L[F+5],f[6]=L[F+6],f[7]=L[F+7],n[0]}function R(L,F){return f[7]=L[F],f[6]=L[F+1],f[5]=L[F+2],f[4]=L[F+3],f[3]=L[F+4],f[2]=L[F+5],f[1]=L[F+6],f[0]=L[F+7],n[0]}p.readDoubleLE=_?O:R,p.readDoubleBE=_?R:O}():function(){function n(_,d,g,O,R,L){var F=O<0?1:0;if(F&&(O=-O),O===0)_(0,R,L+d),_(1/O>0?0:2147483648,R,L+g);else if(isNaN(O))_(0,R,L+d),_(2146959360,R,L+g);else if(O>17976931348623157e292)_(0,R,L+d),_((F<<31|2146435072)>>>0,R,L+g);else{var E;if(O<22250738585072014e-324)E=O/5e-324,_(E>>>0,R,L+d),_((F<<31|E/4294967296)>>>0,R,L+g);else{var k=Math.floor(Math.log(O)/Math.LN2);k===1024&&(k=1023),E=O*Math.pow(2,-k),_(E*4503599627370496>>>0,R,L+d),_((F<<31|k+1023<<20|E*1048576&1048575)>>>0,R,L+g)}}}p.writeDoubleLE=n.bind(null,r,0,4),p.writeDoubleBE=n.bind(null,m,4,0);function f(_,d,g,O,R){var L=_(O,R+d),F=_(O,R+g),E=(F>>31)*2+1,k=F>>>20&2047,N=4294967296*(F&1048575)+L;return k===2047?N?NaN:E*(1/0):k===0?E*5e-324*N:E*Math.pow(2,k-1075)*(N+4503599627370496)}p.readDoubleLE=f.bind(null,w,0,4),p.readDoubleBE=f.bind(null,v,4,0)}(),p}function r(p,n,f){n[f]=p&255,n[f+1]=p>>>8&255,n[f+2]=p>>>16&255,n[f+3]=p>>>24}function m(p,n,f){n[f]=p>>>24,n[f+1]=p>>>16&255,n[f+2]=p>>>8&255,n[f+3]=p&255}function w(p,n){return(p[n]|p[n+1]<<8|p[n+2]<<16|p[n+3]<<24)>>>0}function v(p,n){return(p[n]<<24|p[n+1]<<16|p[n+2]<<8|p[n+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(h){}return null}return inquire_1}var utf8$2={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(h){var r=h;r.length=function(w){for(var v=0,p=0,n=0;n<w.length;++n)p=w.charCodeAt(n),p<128?v+=1:p<2048?v+=2:(p&64512)===55296&&(w.charCodeAt(n+1)&64512)===56320?(++n,v+=4):v+=3;return v},r.read=function(w,v,p){var n=p-v;if(n<1)return"";for(var f=null,_=[],d=0,g;v<p;)g=w[v++],g<128?_[d++]=g:g>191&&g<224?_[d++]=(g&31)<<6|w[v++]&63:g>239&&g<365?(g=((g&7)<<18|(w[v++]&63)<<12|(w[v++]&63)<<6|w[v++]&63)-65536,_[d++]=55296+(g>>10),_[d++]=56320+(g&1023)):_[d++]=(g&15)<<12|(w[v++]&63)<<6|w[v++]&63,d>8191&&((f||(f=[])).push(String.fromCharCode.apply(String,_)),d=0);return f?(d&&f.push(String.fromCharCode.apply(String,_.slice(0,d))),f.join("")):String.fromCharCode.apply(String,_.slice(0,d))},r.write=function(w,v,p){for(var n=p,f,_,d=0;d<w.length;++d)f=w.charCodeAt(d),f<128?v[p++]=f:f<2048?(v[p++]=f>>6|192,v[p++]=f&63|128):(f&64512)===55296&&((_=w.charCodeAt(d+1))&64512)===56320?(f=65536+((f&1023)<<10)+(_&1023),++d,v[p++]=f>>18|240,v[p++]=f>>12&63|128,v[p++]=f>>6&63|128,v[p++]=f&63|128):(v[p++]=f>>12|224,v[p++]=f>>6&63|128,v[p++]=f&63|128);return p-n}}(utf8$2)),utf8$2}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=h;function h(r,m,w){var v=w||8192,p=v>>>1,n=null,f=v;return function(d){if(d<1||d>p)return r(d);f+d>v&&(n=r(v),f=0);var g=m.call(n,f,f+=d);return f&7&&(f=(f|7)+1),g}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=r;var h=requireMinimal();function r(p,n){this.lo=p>>>0,this.hi=n>>>0}var m=r.zero=new r(0,0);m.toNumber=function(){return 0},m.zzEncode=m.zzDecode=function(){return this},m.length=function(){return 1};var w=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(n){if(n===0)return m;var f=n<0;f&&(n=-n);var _=n>>>0,d=(n-_)/4294967296>>>0;return f&&(d=~d>>>0,_=~_>>>0,++_>4294967295&&(_=0,++d>4294967295&&(d=0))),new r(_,d)},r.from=function(n){if(typeof n=="number")return r.fromNumber(n);if(h.isString(n))if(h.Long)n=h.Long.fromString(n);else return r.fromNumber(parseInt(n,10));return n.low||n.high?new r(n.low>>>0,n.high>>>0):m},r.prototype.toNumber=function(n){if(!n&&this.hi>>>31){var f=~this.lo+1>>>0,_=~this.hi>>>0;return f||(_=_+1>>>0),-(f+_*4294967296)}return this.lo+this.hi*4294967296},r.prototype.toLong=function(n){return h.Long?new h.Long(this.lo|0,this.hi|0,Boolean(n)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(n)}};var v=String.prototype.charCodeAt;return r.fromHash=function(n){return n===w?m:new r((v.call(n,0)|v.call(n,1)<<8|v.call(n,2)<<16|v.call(n,3)<<24)>>>0,(v.call(n,4)|v.call(n,5)<<8|v.call(n,6)<<16|v.call(n,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var n=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^n)>>>0,this.lo=(this.lo<<1^n)>>>0,this},r.prototype.zzDecode=function(){var n=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^n)>>>0,this.hi=(this.hi>>>1^n)>>>0,this},r.prototype.length=function(){var n=this.lo,f=(this.lo>>>28|this.hi<<4)>>>0,_=this.hi>>>24;return _===0?f===0?n<16384?n<128?1:2:n<2097152?3:4:f<16384?f<128?5:6:f<2097152?7:8:_<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(h){var r=h;r.asPromise=requireAspromise(),r.base64=requireBase64(),r.EventEmitter=requireEventemitter(),r.float=requireFloat(),r.inquire=requireInquire(),r.utf8=requireUtf8(),r.pool=requirePool(),r.LongBits=requireLongbits(),r.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),r.global=r.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(p){return typeof p=="number"&&isFinite(p)&&Math.floor(p)===p},r.isString=function(p){return typeof p=="string"||p instanceof String},r.isObject=function(p){return p&&typeof p=="object"},r.isset=r.isSet=function(p,n){var f=p[n];return f!=null&&p.hasOwnProperty(n)?typeof f!="object"||(Array.isArray(f)?f.length:Object.keys(f).length)>0:!1},r.Buffer=function(){try{var v=r.inquire("buffer").Buffer;return v.prototype.utf8Write?v:null}catch(p){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(p){return typeof p=="number"?r.Buffer?r._Buffer_allocUnsafe(p):new r.Array(p):r.Buffer?r._Buffer_from(p):typeof Uint8Array=="undefined"?p:new Uint8Array(p)},r.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(p){return p?r.LongBits.from(p).toHash():r.LongBits.zeroHash},r.longFromHash=function(p,n){var f=r.LongBits.fromHash(p);return r.Long?r.Long.fromBits(f.lo,f.hi,n):f.toNumber(Boolean(n))};function m(v,p,n){for(var f=Object.keys(p),_=0;_<f.length;++_)(v[f[_]]===void 0||!n)&&(v[f[_]]=p[f[_]]);return v}r.merge=m,r.lcFirst=function(p){return p.charAt(0).toLowerCase()+p.substring(1)};function w(v){function p(n,f){if(!(this instanceof p))return new p(n,f);Object.defineProperty(this,"message",{get:function(){return n}}),Error.captureStackTrace?Error.captureStackTrace(this,p):Object.defineProperty(this,"stack",{value:new Error().stack||""}),f&&m(this,f)}return p.prototype=Object.create(Error.prototype,{constructor:{value:p,writable:!0,enumerable:!1,configurable:!0},name:{get(){return v},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),p}r.newError=w,r.ProtocolError=w("ProtocolError"),r.oneOfGetter=function(p){for(var n={},f=0;f<p.length;++f)n[p[f]]=1;return function(){for(var _=Object.keys(this),d=_.length-1;d>-1;--d)if(n[_[d]]===1&&this[_[d]]!==void 0&&this[_[d]]!==null)return _[d]}},r.oneOfSetter=function(p){return function(n){for(var f=0;f<p.length;++f)p[f]!==n&&delete this[p[f]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var v=r.Buffer;if(!v){r._Buffer_from=r._Buffer_allocUnsafe=null;return}r._Buffer_from=v.from!==Uint8Array.from&&v.from||function(n,f){return new v(n,f)},r._Buffer_allocUnsafe=v.allocUnsafe||function(n){return new v(n)}}}(minimal)),minimal}var writer=Writer$1,util$6=requireMinimal(),BufferWriter$1,LongBits$1=util$6.LongBits,base64=util$6.base64,utf8$1=util$6.utf8;function Op(h,r,m){this.fn=h,this.len=r,this.next=void 0,this.val=m}function noop(){}function State(h){this.head=h.head,this.tail=h.tail,this.len=h.len,this.next=h.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function h(){return util$6.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1(),Writer$1.alloc=function h(r){return new util$6.Array(r)},util$6.Array!==Array&&(Writer$1.alloc=util$6.pool(Writer$1.alloc,util$6.Array.prototype.subarray)),Writer$1.prototype._push=function h(r,m,w){return this.tail=this.tail.next=new Op(r,m,w),this.len+=m,this};function writeByte(h,r,m){r[m]=h&255}function writeVarint32(h,r,m){for(;h>127;)r[m++]=h&127|128,h>>>=7;r[m]=h}function VarintOp(h,r){this.len=h,this.next=void 0,this.val=r}VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function h(r){return this.len+=(this.tail=this.tail.next=new VarintOp((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this},Writer$1.prototype.int32=function h(r){return r<0?this._push(writeVarint64,10,LongBits$1.fromNumber(r)):this.uint32(r)},Writer$1.prototype.sint32=function h(r){return this.uint32((r<<1^r>>31)>>>0)};function writeVarint64(h,r,m){for(;h.hi;)r[m++]=h.lo&127|128,h.lo=(h.lo>>>7|h.hi<<25)>>>0,h.hi>>>=7;for(;h.lo>127;)r[m++]=h.lo&127|128,h.lo=h.lo>>>7;r[m++]=h.lo}Writer$1.prototype.uint64=function h(r){var m=LongBits$1.from(r);return this._push(writeVarint64,m.length(),m)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function h(r){var m=LongBits$1.from(r).zzEncode();return this._push(writeVarint64,m.length(),m)},Writer$1.prototype.bool=function h(r){return this._push(writeByte,1,r?1:0)};function writeFixed32(h,r,m){r[m]=h&255,r[m+1]=h>>>8&255,r[m+2]=h>>>16&255,r[m+3]=h>>>24}Writer$1.prototype.fixed32=function h(r){return this._push(writeFixed32,4,r>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function h(r){var m=LongBits$1.from(r);return this._push(writeFixed32,4,m.lo)._push(writeFixed32,4,m.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function h(r){return this._push(util$6.float.writeFloatLE,4,r)},Writer$1.prototype.double=function h(r){return this._push(util$6.float.writeDoubleLE,8,r)};var writeBytes=util$6.Array.prototype.set?function h(r,m,w){m.set(r,w)}:function h(r,m,w){for(var v=0;v<r.length;++v)m[w+v]=r[v]};Writer$1.prototype.bytes=function h(r){var m=r.length>>>0;if(!m)return this._push(writeByte,1,0);if(util$6.isString(r)){var w=Writer$1.alloc(m=base64.length(r));base64.decode(r,w,0),r=w}return this.uint32(m)._push(writeBytes,m,r)},Writer$1.prototype.string=function h(r){var m=utf8$1.length(r);return m?this.uint32(m)._push(utf8$1.write,m,r):this._push(writeByte,1,0)},Writer$1.prototype.fork=function h(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function h(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function h(){var r=this.head,m=this.tail,w=this.len;return this.reset().uint32(w),w&&(this.tail.next=r.next,this.tail=m,this.len+=w),this},Writer$1.prototype.finish=function h(){for(var r=this.head.next,m=this.constructor.alloc(this.len),w=0;r;)r.fn(r.val,m,w),w+=r.len,r=r.next;return m},Writer$1._configure=function(h){BufferWriter$1=h,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$5=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$5._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$5.Buffer&&util$5.Buffer.prototype instanceof Uint8Array&&util$5.Buffer.prototype.set.name==="set"?function(r,m,w){m.set(r,w)}:function(r,m,w){if(r.copy)r.copy(m,w,0,r.length);else for(var v=0;v<r.length;)m[w++]=r[v++]}},BufferWriter.prototype.bytes=function h(r){util$5.isString(r)&&(r=util$5._Buffer_from(r,"base64"));var m=r.length>>>0;return this.uint32(m),m&&this._push(BufferWriter.writeBytesBuffer,m,r),this};function writeStringBuffer(h,r,m){h.length<40?util$5.utf8.write(h,r,m):r.utf8Write?r.utf8Write(h,m):r.write(h,m)}BufferWriter.prototype.string=function h(r){var m=util$5.Buffer.byteLength(r);return this.uint32(m),m&&this._push(writeStringBuffer,m,r),this},BufferWriter._configure();var reader=Reader$1,util$4=requireMinimal(),BufferReader$1,LongBits=util$4.LongBits,utf8=util$4.utf8;function indexOutOfRange(h,r){return RangeError("index out of range: "+h.pos+" + "+(r||1)+" > "+h.len)}function Reader$1(h){this.buf=h,this.pos=0,this.len=h.length}var create_array=typeof Uint8Array!="undefined"?function h(r){if(r instanceof Uint8Array||Array.isArray(r))return new Reader$1(r);throw Error("illegal buffer")}:function h(r){if(Array.isArray(r))return new Reader$1(r);throw Error("illegal buffer")},create=function h(){return util$4.Buffer?function(m){return(Reader$1.create=function(v){return util$4.Buffer.isBuffer(v)?new BufferReader$1(v):create_array(v)})(m)}:create_array};Reader$1.create=create(),Reader$1.prototype._slice=util$4.Array.prototype.subarray||util$4.Array.prototype.slice,Reader$1.prototype.uint32=function h(){var r=4294967295;return function(){if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return r}}(),Reader$1.prototype.int32=function h(){return this.uint32()|0},Reader$1.prototype.sint32=function h(){var r=this.uint32();return r>>>1^-(r&1)|0};function readLongVarint(){var h=new LongBits(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(h.lo=(h.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return h;if(h.lo=(h.lo|(this.buf[this.pos]&127)<<28)>>>0,h.hi=(h.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return h;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw indexOutOfRange(this);if(h.lo=(h.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return h}return h.lo=(h.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,h}if(this.len-this.pos>4){for(;r<5;++r)if(h.hi=(h.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return h}else for(;r<5;++r){if(this.pos>=this.len)throw indexOutOfRange(this);if(h.hi=(h.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return h}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function h(){return this.uint32()!==0};function readFixed32_end(h,r){return(h[r-4]|h[r-3]<<8|h[r-2]<<16|h[r-1]<<24)>>>0}Reader$1.prototype.fixed32=function h(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function h(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function h(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var r=util$4.float.readFloatLE(this.buf,this.pos);return this.pos+=4,r},Reader$1.prototype.double=function h(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var r=util$4.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,r},Reader$1.prototype.bytes=function h(){var r=this.uint32(),m=this.pos,w=this.pos+r;if(w>this.len)throw indexOutOfRange(this,r);return this.pos+=r,Array.isArray(this.buf)?this.buf.slice(m,w):m===w?new this.buf.constructor(0):this._slice.call(this.buf,m,w)},Reader$1.prototype.string=function h(){var r=this.bytes();return utf8.read(r,0,r.length)},Reader$1.prototype.skip=function h(r){if(typeof r=="number"){if(this.pos+r>this.len)throw indexOutOfRange(this,r);this.pos+=r}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this},Reader$1.prototype.skipType=function(h){switch(h){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(h=this.uint32()&7)!==4;)this.skipType(h);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+h+" at offset "+this.pos)}return this},Reader$1._configure=function(h){BufferReader$1=h,Reader$1.create=create(),BufferReader$1._configure();var r=util$4.Long?"toLong":"toNumber";util$4.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[r](!1)},uint64:function(){return readLongVarint.call(this)[r](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[r](!1)},fixed64:function(){return readFixed64.call(this)[r](!0)},sfixed64:function(){return readFixed64.call(this)[r](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$3=requireMinimal();function BufferReader(h){Reader.call(this,h)}BufferReader._configure=function(){util$3.Buffer&&(BufferReader.prototype._slice=util$3.Buffer.prototype.slice)},BufferReader.prototype.string=function h(){var r=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+r,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+r,this.len))},BufferReader._configure();var rpc={},service$1=Service,util$2=requireMinimal();(Service.prototype=Object.create(util$2.EventEmitter.prototype)).constructor=Service;function Service(h,r,m){if(typeof h!="function")throw TypeError("rpcImpl must be a function");util$2.EventEmitter.call(this),this.rpcImpl=h,this.requestDelimited=Boolean(r),this.responseDelimited=Boolean(m)}Service.prototype.rpcCall=function h(r,m,w,v,p){if(!v)throw TypeError("request must be specified");var n=this;if(!p)return util$2.asPromise(h,n,r,m,w,v);if(!n.rpcImpl){setTimeout(function(){p(Error("already ended"))},0);return}try{return n.rpcImpl(r,m[n.requestDelimited?"encodeDelimited":"encode"](v).finish(),function(_,d){if(_)return n.emit("error",_,r),p(_);if(d===null){n.end(!0);return}if(!(d instanceof w))try{d=w[n.responseDelimited?"decodeDelimited":"decode"](d)}catch(g){return n.emit("error",g,r),p(g)}return n.emit("data",d,r),p(null,d)})}catch(f){n.emit("error",f,r),setTimeout(function(){p(f)},0);return}},Service.prototype.end=function h(r){return this.rpcImpl&&(r||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},function(h){var r=h;r.Service=service$1}(rpc);var roots={};(function(h){var r=h;r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=requireMinimal(),r.rpc=rpc,r.roots=roots,r.configure=m;function m(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}m()})(indexMinimal);var util$1={exports:{}},codegen_1=codegen;function codegen(h,r){typeof h=="string"&&(r=h,h=void 0);var m=[];function w(p){if(typeof p!="string"){var n=v();if(codegen.verbose&&console.log("codegen: "+n),n="return "+n,p){for(var f=Object.keys(p),_=new Array(f.length+1),d=new Array(f.length),g=0;g<f.length;)_[g]=f[g],d[g]=p[f[g++]];return _[g]=n,Function.apply(null,_).apply(null,d)}return Function(n)()}for(var O=new Array(arguments.length-1),R=0;R<O.length;)O[R]=arguments[++R];if(R=0,p=p.replace(/%([%dfijs])/g,function(F,E){var k=O[R++];switch(E){case"d":case"f":return String(Number(k));case"i":return String(Math.floor(k));case"j":return JSON.stringify(k);case"s":return String(k)}return"%"}),R!==O.length)throw Error("parameter count mismatch");return m.push(p),w}function v(p){return"function "+(p||r||"")+"("+(h&&h.join(",")||"")+`){
  `+m.join(`
  `)+`
}`}return w.toString=v,w}codegen.verbose=!1;var fetch_1=fetch,asPromise=requireAspromise(),inquire=requireInquire(),fs=inquire("fs");function fetch(h,r,m){return typeof r=="function"?(m=r,r={}):r||(r={}),m?!r.xhr&&fs&&fs.readFile?fs.readFile(h,function(v,p){return v&&typeof XMLHttpRequest!="undefined"?fetch.xhr(h,r,m):v?m(v):m(null,r.binary?p:p.toString("utf8"))}):fetch.xhr(h,r,m):asPromise(fetch,this,h,r)}fetch.xhr=function h(r,m,w){var v=new XMLHttpRequest;v.onreadystatechange=function(){if(v.readyState===4){if(v.status!==0&&v.status!==200)return w(Error("status "+v.status));if(m.binary){var n=v.response;if(!n){n=[];for(var f=0;f<v.responseText.length;++f)n.push(v.responseText.charCodeAt(f)&255)}return w(null,typeof Uint8Array!="undefined"?new Uint8Array(n):n)}return w(null,v.responseText)}},m.binary&&("overrideMimeType"in v&&v.overrideMimeType("text/plain; charset=x-user-defined"),v.responseType="arraybuffer"),v.open("GET",r),v.send()};var path={};(function(h){var r=h,m=r.isAbsolute=function(p){return/^(?:\/|\w+:)/.test(p)},w=r.normalize=function(p){p=p.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var n=p.split("/"),f=m(p),_="";f&&(_=n.shift()+"/");for(var d=0;d<n.length;)n[d]===".."?d>0&&n[d-1]!==".."?n.splice(--d,2):f?n.splice(d,1):++d:n[d]==="."?n.splice(d,1):++d;return _+n.join("/")};r.resolve=function(p,n,f){return f||(n=w(n)),m(n)?n:(f||(p=w(p)),(p=p.replace(/(?:\/|^)[^/]+$/,"")).length?w(p+"/"+n):n)}})(path);var types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(h){var r=h,m=requireUtil(),w=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function v(p,n){var f=0,_={};for(n|=0;f<p.length;)_[w[f+n]]=p[f++];return _}r.basic=v([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=v([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",m.emptyArray,null]),r.long=v([0,0,0,1,1],7),r.mapKey=v([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=v([1,5,0,0,0,5,5,0,0,0,1,1,0])}(types)),types}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=n;var h=requireObject();((n.prototype=Object.create(h.prototype)).constructor=n).className="Field";var r=require_enum(),m=requireTypes(),w=requireUtil(),v,p=/^required|optional|repeated$/;n.fromJSON=function(_,d){return new n(_,d.id,d.type,d.rule,d.extend,d.options,d.comment)};function n(f,_,d,g,O,R,L){if(w.isObject(g)?(L=O,R=g,g=O=void 0):w.isObject(O)&&(L=R,R=O,O=void 0),h.call(this,f,R),!w.isInteger(_)||_<0)throw TypeError("id must be a non-negative integer");if(!w.isString(d))throw TypeError("type must be a string");if(g!==void 0&&!p.test(g=g.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(O!==void 0&&!w.isString(O))throw TypeError("extend must be a string");g==="proto3_optional"&&(g="optional"),this.rule=g&&g!=="optional"?g:void 0,this.type=d,this.id=_,this.extend=O||void 0,this.required=g==="required",this.optional=!this.required,this.repeated=g==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=w.Long?m.long[d]!==void 0:!1,this.bytes=d==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=L}return Object.defineProperty(n.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}}),n.prototype.setOption=function(_,d,g){return _==="packed"&&(this._packed=null),h.prototype.setOption.call(this,_,d,g)},n.prototype.toJSON=function(_){var d=_?Boolean(_.keepComments):!1;return w.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",d?this.comment:void 0])},n.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=m.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof v?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof r&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof r))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=w.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var _;w.base64.test(this.typeDefault)?w.base64.decode(this.typeDefault,_=w.newBuffer(w.base64.length(this.typeDefault)),0):w.utf8.write(this.typeDefault,_=w.newBuffer(w.utf8.length(this.typeDefault)),0),this.typeDefault=_}return this.map?this.defaultValue=w.emptyObject:this.repeated?this.defaultValue=w.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof v&&(this.parent.ctor.prototype[this.name]=this.defaultValue),h.prototype.resolve.call(this)},n.d=function(_,d,g,O){return typeof d=="function"?d=w.decorateType(d).name:d&&typeof d=="object"&&(d=w.decorateEnum(d).name),function(L,F){w.decorateType(L.constructor).add(new n(F,_,d,g,{default:O}))}},n._configure=function(_){v=_},field}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=f;var h=requireObject();((f.prototype=Object.create(h.prototype)).constructor=f).className="Namespace";var r=requireField(),m=requireUtil(),w,v,p;f.fromJSON=function(g,O){return new f(g,O.options).addJSON(O.nested)};function n(d,g){if(!!(d&&d.length)){for(var O={},R=0;R<d.length;++R)O[d[R].name]=d[R].toJSON(g);return O}}f.arrayToJSON=n,f.isReservedId=function(g,O){if(g){for(var R=0;R<g.length;++R)if(typeof g[R]!="string"&&g[R][0]<=O&&g[R][1]>O)return!0}return!1},f.isReservedName=function(g,O){if(g){for(var R=0;R<g.length;++R)if(g[R]===O)return!0}return!1};function f(d,g){h.call(this,d,g),this.nested=void 0,this._nestedArray=null}function _(d){return d._nestedArray=null,d}return Object.defineProperty(f.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=m.toArray(this.nested))}}),f.prototype.toJSON=function(g){return m.toObject(["options",this.options,"nested",n(this.nestedArray,g)])},f.prototype.addJSON=function(g){var O=this;if(g)for(var R=Object.keys(g),L=0,F;L<R.length;++L)F=g[R[L]],O.add((F.fields!==void 0?w.fromJSON:F.values!==void 0?p.fromJSON:F.methods!==void 0?v.fromJSON:F.id!==void 0?r.fromJSON:f.fromJSON)(R[L],F));return this},f.prototype.get=function(g){return this.nested&&this.nested[g]||null},f.prototype.getEnum=function(g){if(this.nested&&this.nested[g]instanceof p)return this.nested[g].values;throw Error("no such enum: "+g)},f.prototype.add=function(g){if(!(g instanceof r&&g.extend!==void 0||g instanceof w||g instanceof p||g instanceof v||g instanceof f))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var O=this.get(g.name);if(O)if(O instanceof f&&g instanceof f&&!(O instanceof w||O instanceof v)){for(var R=O.nestedArray,L=0;L<R.length;++L)g.add(R[L]);this.remove(O),this.nested||(this.nested={}),g.setOptions(O.options,!0)}else throw Error("duplicate name '"+g.name+"' in "+this)}return this.nested[g.name]=g,g.onAdd(this),_(this)},f.prototype.remove=function(g){if(!(g instanceof h))throw TypeError("object must be a ReflectionObject");if(g.parent!==this)throw Error(g+" is not a member of "+this);return delete this.nested[g.name],Object.keys(this.nested).length||(this.nested=void 0),g.onRemove(this),_(this)},f.prototype.define=function(g,O){if(m.isString(g))g=g.split(".");else if(!Array.isArray(g))throw TypeError("illegal path");if(g&&g.length&&g[0]==="")throw Error("path must be relative");for(var R=this;g.length>0;){var L=g.shift();if(R.nested&&R.nested[L]){if(R=R.nested[L],!(R instanceof f))throw Error("path conflicts with non-namespace objects")}else R.add(R=new f(L))}return O&&R.addJSON(O),R},f.prototype.resolveAll=function(){for(var g=this.nestedArray,O=0;O<g.length;)g[O]instanceof f?g[O++].resolveAll():g[O++].resolve();return this.resolve()},f.prototype.lookup=function(g,O,R){if(typeof O=="boolean"?(R=O,O=void 0):O&&!Array.isArray(O)&&(O=[O]),m.isString(g)&&g.length){if(g===".")return this.root;g=g.split(".")}else if(!g.length)return this;if(g[0]==="")return this.root.lookup(g.slice(1),O);var L=this.get(g[0]);if(L){if(g.length===1){if(!O||O.indexOf(L.constructor)>-1)return L}else if(L instanceof f&&(L=L.lookup(g.slice(1),O,!0)))return L}else for(var F=0;F<this.nestedArray.length;++F)if(this._nestedArray[F]instanceof f&&(L=this._nestedArray[F].lookup(g,O,!0)))return L;return this.parent===null||R?null:this.parent.lookup(g,O)},f.prototype.lookupType=function(g){var O=this.lookup(g,[w]);if(!O)throw Error("no such type: "+g);return O},f.prototype.lookupEnum=function(g){var O=this.lookup(g,[p]);if(!O)throw Error("no such Enum '"+g+"' in "+this);return O},f.prototype.lookupTypeOrEnum=function(g){var O=this.lookup(g,[w,p]);if(!O)throw Error("no such Type or Enum '"+g+"' in "+this);return O},f.prototype.lookupService=function(g){var O=this.lookup(g,[v]);if(!O)throw Error("no such Service '"+g+"' in "+this);return O},f._configure=function(d,g,O){w=d,v=g,p=O},namespace}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=w;var h=requireObject();((w.prototype=Object.create(h.prototype)).constructor=w).className="OneOf";var r=requireField(),m=requireUtil();function w(p,n,f,_){if(Array.isArray(n)||(f=n,n=void 0),h.call(this,p,f),!(n===void 0||Array.isArray(n)))throw TypeError("fieldNames must be an Array");this.oneof=n||[],this.fieldsArray=[],this.comment=_}w.fromJSON=function(n,f){return new w(n,f.oneof,f.options,f.comment)},w.prototype.toJSON=function(n){var f=n?Boolean(n.keepComments):!1;return m.toObject(["options",this.options,"oneof",this.oneof,"comment",f?this.comment:void 0])};function v(p){if(p.parent)for(var n=0;n<p.fieldsArray.length;++n)p.fieldsArray[n].parent||p.parent.add(p.fieldsArray[n])}return w.prototype.add=function(n){if(!(n instanceof r))throw TypeError("field must be a Field");return n.parent&&n.parent!==this.parent&&n.parent.remove(n),this.oneof.push(n.name),this.fieldsArray.push(n),n.partOf=this,v(this),this},w.prototype.remove=function(n){if(!(n instanceof r))throw TypeError("field must be a Field");var f=this.fieldsArray.indexOf(n);if(f<0)throw Error(n+" is not a member of "+this);return this.fieldsArray.splice(f,1),f=this.oneof.indexOf(n.name),f>-1&&this.oneof.splice(f,1),n.partOf=null,this},w.prototype.onAdd=function(n){h.prototype.onAdd.call(this,n);for(var f=this,_=0;_<this.oneof.length;++_){var d=n.get(this.oneof[_]);d&&!d.partOf&&(d.partOf=f,f.fieldsArray.push(d))}v(this)},w.prototype.onRemove=function(n){for(var f=0,_;f<this.fieldsArray.length;++f)(_=this.fieldsArray[f]).parent&&_.parent.remove(_);h.prototype.onRemove.call(this,n)},w.d=function(){for(var n=new Array(arguments.length),f=0;f<arguments.length;)n[f]=arguments[f++];return function(d,g){m.decorateType(d.constructor).add(new w(g,n)),Object.defineProperty(d,g,{get:m.oneOfGetter(n),set:m.oneOfSetter(n)})}},oneof}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=w;var h=requireField();((w.prototype=Object.create(h.prototype)).constructor=w).className="MapField";var r=requireTypes(),m=requireUtil();function w(v,p,n,f,_,d){if(h.call(this,v,p,f,void 0,void 0,_,d),!m.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}return w.fromJSON=function(p,n){return new w(p,n.id,n.keyType,n.type,n.options,n.comment)},w.prototype.toJSON=function(p){var n=p?Boolean(p.keepComments):!1;return m.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",n?this.comment:void 0])},w.prototype.resolve=function(){if(this.resolved)return this;if(r.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return h.prototype.resolve.call(this)},w.d=function(p,n,f){return typeof f=="function"?f=m.decorateType(f).name:f&&typeof f=="object"&&(f=m.decorateEnum(f).name),function(d,g){m.decorateType(d.constructor).add(new w(g,p,n,f))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=m;var h=requireObject();((m.prototype=Object.create(h.prototype)).constructor=m).className="Method";var r=requireUtil();function m(w,v,p,n,f,_,d,g,O){if(r.isObject(f)?(d=f,f=_=void 0):r.isObject(_)&&(d=_,_=void 0),!(v===void 0||r.isString(v)))throw TypeError("type must be a string");if(!r.isString(p))throw TypeError("requestType must be a string");if(!r.isString(n))throw TypeError("responseType must be a string");h.call(this,w,d),this.type=v||"rpc",this.requestType=p,this.requestStream=f?!0:void 0,this.responseType=n,this.responseStream=_?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=g,this.parsedOptions=O}return m.fromJSON=function(v,p){return new m(v,p.type,p.requestType,p.responseType,p.requestStream,p.responseStream,p.options,p.comment,p.parsedOptions)},m.prototype.toJSON=function(v){var p=v?Boolean(v.keepComments):!1;return r.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",p?this.comment:void 0,"parsedOptions",this.parsedOptions])},m.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),h.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=v;var h=requireNamespace();((v.prototype=Object.create(h.prototype)).constructor=v).className="Service";var r=requireMethod(),m=requireUtil(),w=rpc;function v(n,f){h.call(this,n,f),this.methods={},this._methodsArray=null}v.fromJSON=function(f,_){var d=new v(f,_.options);if(_.methods)for(var g=Object.keys(_.methods),O=0;O<g.length;++O)d.add(r.fromJSON(g[O],_.methods[g[O]]));return _.nested&&d.addJSON(_.nested),d.comment=_.comment,d},v.prototype.toJSON=function(f){var _=h.prototype.toJSON.call(this,f),d=f?Boolean(f.keepComments):!1;return m.toObject(["options",_&&_.options||void 0,"methods",h.arrayToJSON(this.methodsArray,f)||{},"nested",_&&_.nested||void 0,"comment",d?this.comment:void 0])},Object.defineProperty(v.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=m.toArray(this.methods))}});function p(n){return n._methodsArray=null,n}return v.prototype.get=function(f){return this.methods[f]||h.prototype.get.call(this,f)},v.prototype.resolveAll=function(){for(var f=this.methodsArray,_=0;_<f.length;++_)f[_].resolve();return h.prototype.resolve.call(this)},v.prototype.add=function(f){if(this.get(f.name))throw Error("duplicate name '"+f.name+"' in "+this);return f instanceof r?(this.methods[f.name]=f,f.parent=this,p(this)):h.prototype.add.call(this,f)},v.prototype.remove=function(f){if(f instanceof r){if(this.methods[f.name]!==f)throw Error(f+" is not a member of "+this);return delete this.methods[f.name],f.parent=null,p(this)}return h.prototype.remove.call(this,f)},v.prototype.create=function(f,_,d){for(var g=new w.Service(f,_,d),O=0,R;O<this.methodsArray.length;++O){var L=m.lcFirst((R=this._methodsArray[O]).resolve().name).replace(/[^$\w_]/g,"");g[L]=m.codegen(["r","c"],m.isReserved(L)?L+"_":L)("return this.rpcCall(m,q,s,r,c)")({m:R,q:R.resolvedRequestType.ctor,s:R.resolvedResponseType.ctor})}return g},service}var message=Message$1,util=requireMinimal();function Message$1(h){if(h)for(var r=Object.keys(h),m=0;m<r.length;++m)this[r[m]]=h[r[m]]}Message$1.create=function h(r){return this.$type.create(r)},Message$1.encode=function h(r,m){return this.$type.encode(r,m)},Message$1.encodeDelimited=function h(r,m){return this.$type.encodeDelimited(r,m)},Message$1.decode=function h(r){return this.$type.decode(r)},Message$1.decodeDelimited=function h(r){return this.$type.decodeDelimited(r)},Message$1.verify=function h(r){return this.$type.verify(r)},Message$1.fromObject=function h(r){return this.$type.fromObject(r)},Message$1.toObject=function h(r,m){return this.$type.toObject(r,m)},Message$1.prototype.toJSON=function h(){return this.$type.toObject(this,util.toJSONOptions)};var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=v;var h=require_enum(),r=requireTypes(),m=requireUtil();function w(p){return"missing required '"+p.name+"'"}function v(p){var n=m.codegen(["r","l"],p.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(p.fieldsArray.filter(function(R){return R.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");p.group&&n("if((t&7)===4)")("break"),n("switch(t>>>3){");for(var f=0;f<p.fieldsArray.length;++f){var _=p._fieldsArray[f].resolve(),d=_.resolvedType instanceof h?"int32":_.type,g="m"+m.safeProp(_.name);n("case %i: {",_.id),_.map?(n("if(%s===util.emptyObject)",g)("%s={}",g)("var c2 = r.uint32()+r.pos"),r.defaults[_.keyType]!==void 0?n("k=%j",r.defaults[_.keyType]):n("k=null"),r.defaults[d]!==void 0?n("value=%j",r.defaults[d]):n("value=null"),n("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",_.keyType)("case 2:"),r.basic[d]===void 0?n("value=types[%i].decode(r,r.uint32())",f):n("value=r.%s()",d),n("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),r.long[_.keyType]!==void 0?n('%s[typeof k==="object"?util.longToHash(k):k]=value',g):n("%s[k]=value",g)):_.repeated?(n("if(!(%s&&%s.length))",g,g)("%s=[]",g),r.packed[d]!==void 0&&n("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",g,d)("}else"),r.basic[d]===void 0?n(_.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",g,f):n("%s.push(r.%s())",g,d)):r.basic[d]===void 0?n(_.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",g,f):n("%s=r.%s()",g,d),n("break")("}")}for(n("default:")("r.skipType(t&7)")("break")("}")("}"),f=0;f<p._fieldsArray.length;++f){var O=p._fieldsArray[f];O.required&&n("if(!m.hasOwnProperty(%j))",O.name)("throw util.ProtocolError(%j,{instance:m})",w(O))}return n("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=p;var h=require_enum(),r=requireUtil();function m(n,f){return n.name+": "+f+(n.repeated&&f!=="array"?"[]":n.map&&f!=="object"?"{k:"+n.keyType+"}":"")+" expected"}function w(n,f,_,d){if(f.resolvedType)if(f.resolvedType instanceof h){n("switch(%s){",d)("default:")("return%j",m(f,"enum value"));for(var g=Object.keys(f.resolvedType.values),O=0;O<g.length;++O)n("case %i:",f.resolvedType.values[g[O]]);n("break")("}")}else n("{")("var e=types[%i].verify(%s);",_,d)("if(e)")("return%j+e",f.name+".")("}");else switch(f.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":n("if(!util.isInteger(%s))",d)("return%j",m(f,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":n("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",d,d,d,d)("return%j",m(f,"integer|Long"));break;case"float":case"double":n('if(typeof %s!=="number")',d)("return%j",m(f,"number"));break;case"bool":n('if(typeof %s!=="boolean")',d)("return%j",m(f,"boolean"));break;case"string":n("if(!util.isString(%s))",d)("return%j",m(f,"string"));break;case"bytes":n('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',d,d,d)("return%j",m(f,"buffer"));break}return n}function v(n,f,_){switch(f.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":n("if(!util.key32Re.test(%s))",_)("return%j",m(f,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":n("if(!util.key64Re.test(%s))",_)("return%j",m(f,"integer|Long key"));break;case"bool":n("if(!util.key2Re.test(%s))",_)("return%j",m(f,"boolean key"));break}return n}function p(n){var f=r.codegen(["m"],n.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),_=n.oneofsArray,d={};_.length&&f("var p={}");for(var g=0;g<n.fieldsArray.length;++g){var O=n._fieldsArray[g].resolve(),R="m"+r.safeProp(O.name);if(O.optional&&f("if(%s!=null&&m.hasOwnProperty(%j)){",R,O.name),O.map)f("if(!util.isObject(%s))",R)("return%j",m(O,"object"))("var k=Object.keys(%s)",R)("for(var i=0;i<k.length;++i){"),v(f,O,"k[i]"),w(f,O,g,R+"[k[i]]")("}");else if(O.repeated)f("if(!Array.isArray(%s))",R)("return%j",m(O,"array"))("for(var i=0;i<%s.length;++i){",R),w(f,O,g,R+"[i]")("}");else{if(O.partOf){var L=r.safeProp(O.partOf.name);d[O.partOf.name]===1&&f("if(p%s===1)",L)("return%j",O.partOf.name+": multiple values"),d[O.partOf.name]=1,f("p%s=1",L)}w(f,O,g,R)}O.optional&&f("}")}return f("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(h){var r=h,m=require_enum(),w=requireUtil();function v(n,f,_,d){if(f.resolvedType)if(f.resolvedType instanceof m){n("switch(d%s){",d);for(var g=f.resolvedType.values,O=Object.keys(g),R=0;R<O.length;++R)f.repeated&&g[O[R]]===f.typeDefault&&n("default:"),n("case%j:",O[R])("case %i:",g[O[R]])("m%s=%j",d,g[O[R]])("break");n("}")}else n('if(typeof d%s!=="object")',d)("throw TypeError(%j)",f.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",d,_,d);else{var L=!1;switch(f.type){case"double":case"float":n("m%s=Number(d%s)",d,d);break;case"uint32":case"fixed32":n("m%s=d%s>>>0",d,d);break;case"int32":case"sint32":case"sfixed32":n("m%s=d%s|0",d,d);break;case"uint64":L=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":n("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",d,d,L)('else if(typeof d%s==="string")',d)("m%s=parseInt(d%s,10)",d,d)('else if(typeof d%s==="number")',d)("m%s=d%s",d,d)('else if(typeof d%s==="object")',d)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",d,d,d,L?"true":"");break;case"bytes":n('if(typeof d%s==="string")',d)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",d,d,d)("else if(d%s.length >= 0)",d)("m%s=d%s",d,d);break;case"string":n("m%s=String(d%s)",d,d);break;case"bool":n("m%s=Boolean(d%s)",d,d);break}}return n}r.fromObject=function(f){var _=f.fieldsArray,d=w.codegen(["d"],f.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!_.length)return d("return new this.ctor");d("var m=new this.ctor");for(var g=0;g<_.length;++g){var O=_[g].resolve(),R=w.safeProp(O.name);O.map?(d("if(d%s){",R)('if(typeof d%s!=="object")',R)("throw TypeError(%j)",O.fullName+": object expected")("m%s={}",R)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",R),v(d,O,g,R+"[ks[i]]")("}")("}")):O.repeated?(d("if(d%s){",R)("if(!Array.isArray(d%s))",R)("throw TypeError(%j)",O.fullName+": array expected")("m%s=[]",R)("for(var i=0;i<d%s.length;++i){",R),v(d,O,g,R+"[i]")("}")("}")):(O.resolvedType instanceof m||d("if(d%s!=null){",R),v(d,O,g,R),O.resolvedType instanceof m||d("}"))}return d("return m")};function p(n,f,_,d){if(f.resolvedType)f.resolvedType instanceof m?n("d%s=o.enums===String?types[%i].values[m%s]:m%s",d,_,d,d):n("d%s=types[%i].toObject(m%s,o)",d,_,d);else{var g=!1;switch(f.type){case"double":case"float":n("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",d,d,d,d);break;case"uint64":g=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":n('if(typeof m%s==="number")',d)("d%s=o.longs===String?String(m%s):m%s",d,d,d)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",d,d,d,d,g?"true":"",d);break;case"bytes":n("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",d,d,d,d,d);break;default:n("d%s=m%s",d,d);break}}return n}r.toObject=function(f){var _=f.fieldsArray.slice().sort(w.compareFieldsById);if(!_.length)return w.codegen()("return {}");for(var d=w.codegen(["m","o"],f.name+"$toObject")("if(!o)")("o={}")("var d={}"),g=[],O=[],R=[],L=0;L<_.length;++L)_[L].partOf||(_[L].resolve().repeated?g:_[L].map?O:R).push(_[L]);if(g.length){for(d("if(o.arrays||o.defaults){"),L=0;L<g.length;++L)d("d%s=[]",w.safeProp(g[L].name));d("}")}if(O.length){for(d("if(o.objects||o.defaults){"),L=0;L<O.length;++L)d("d%s={}",w.safeProp(O[L].name));d("}")}if(R.length){for(d("if(o.defaults){"),L=0;L<R.length;++L){var F=R[L],E=w.safeProp(F.name);if(F.resolvedType instanceof m)d("d%s=o.enums===String?%j:%j",E,F.resolvedType.valuesById[F.typeDefault],F.typeDefault);else if(F.long)d("if(util.Long){")("var n=new util.Long(%i,%i,%j)",F.typeDefault.low,F.typeDefault.high,F.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",E)("}else")("d%s=o.longs===String?%j:%i",E,F.typeDefault.toString(),F.typeDefault.toNumber());else if(F.bytes){var k="["+Array.prototype.slice.call(F.typeDefault).join(",")+"]";d("if(o.bytes===String)d%s=%j",E,String.fromCharCode.apply(String,F.typeDefault))("else{")("d%s=%s",E,k)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",E,E)("}")}else d("d%s=%j",E,F.typeDefault)}d("}")}var N=!1;for(L=0;L<_.length;++L){var F=_[L],q=f._fieldsArray.indexOf(F),E=w.safeProp(F.name);F.map?(N||(N=!0,d("var ks2")),d("if(m%s&&(ks2=Object.keys(m%s)).length){",E,E)("d%s={}",E)("for(var j=0;j<ks2.length;++j){"),p(d,F,q,E+"[ks2[j]]")("}")):F.repeated?(d("if(m%s&&m%s.length){",E,E)("d%s=[]",E)("for(var j=0;j<m%s.length;++j){",E),p(d,F,q,E+"[j]")("}")):(d("if(m%s!=null&&m.hasOwnProperty(%j)){",E,F.name),p(d,F,q,E),F.partOf&&d("if(o.oneofs)")("d%s=%j",w.safeProp(F.partOf.name),F.name)),d("}")}return d("return d")}}(converter)),converter}var wrappers={};(function(h){var r=h,m=message;r[".google.protobuf.Any"]={fromObject:function(w){if(w&&w["@type"]){var v=w["@type"].substring(w["@type"].lastIndexOf("/")+1),p=this.lookup(v);if(p){var n=w["@type"].charAt(0)==="."?w["@type"].slice(1):w["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:p.encode(p.fromObject(w)).finish()})}}return this.fromObject(w)},toObject:function(w,v){var p="type.googleapis.com/",n="",f="";if(v&&v.json&&w.type_url&&w.value){f=w.type_url.substring(w.type_url.lastIndexOf("/")+1),n=w.type_url.substring(0,w.type_url.lastIndexOf("/")+1);var _=this.lookup(f);_&&(w=_.decode(w.value))}if(!(w instanceof this.ctor)&&w instanceof m){var d=w.$type.toObject(w,v),g=w.$type.fullName[0]==="."?w.$type.fullName.slice(1):w.$type.fullName;return n===""&&(n=p),f=n+g,d["@type"]=f,d}return this.toObject(w,v)}}})(wrappers);var type,hasRequiredType;function requireType(){if(hasRequiredType)return type;hasRequiredType=1,type=E;var h=requireNamespace();((E.prototype=Object.create(h.prototype)).constructor=E).className="Type";var r=require_enum(),m=requireOneof(),w=requireField(),v=requireMapfield(),p=requireService(),n=message,f=reader,_=writer,d=requireUtil(),g=requireEncoder(),O=requireDecoder(),R=requireVerifier(),L=requireConverter(),F=wrappers;function E(N,q){h.call(this,N,q),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(E.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var N=Object.keys(this.fields),q=0;q<N.length;++q){var A=this.fields[N[q]],S=A.id;if(this._fieldsById[S])throw Error("duplicate id "+S+" in "+this);this._fieldsById[S]=A}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=E.generateConstructor(this)())},set:function(N){var q=N.prototype;q instanceof n||((N.prototype=new n).constructor=N,d.merge(N.prototype,q)),N.$type=N.prototype.$type=this,d.merge(N,n,!0),this._ctor=N;for(var A=0;A<this.fieldsArray.length;++A)this._fieldsArray[A].resolve();var S={};for(A=0;A<this.oneofsArray.length;++A)S[this._oneofsArray[A].resolve().name]={get:d.oneOfGetter(this._oneofsArray[A].oneof),set:d.oneOfSetter(this._oneofsArray[A].oneof)};A&&Object.defineProperties(N.prototype,S)}}}),E.generateConstructor=function(q){for(var A=d.codegen(["p"],q.name),S=0,$;S<q.fieldsArray.length;++S)($=q._fieldsArray[S]).map?A("this%s={}",d.safeProp($.name)):$.repeated&&A("this%s=[]",d.safeProp($.name));return A("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function k(N){return N._fieldsById=N._fieldsArray=N._oneofsArray=null,delete N.encode,delete N.decode,delete N.verify,N}return E.fromJSON=function(q,A){var S=new E(q,A.options);S.extensions=A.extensions,S.reserved=A.reserved;for(var $=Object.keys(A.fields),B=0;B<$.length;++B)S.add((typeof A.fields[$[B]].keyType!="undefined"?v.fromJSON:w.fromJSON)($[B],A.fields[$[B]]));if(A.oneofs)for($=Object.keys(A.oneofs),B=0;B<$.length;++B)S.add(m.fromJSON($[B],A.oneofs[$[B]]));if(A.nested)for($=Object.keys(A.nested),B=0;B<$.length;++B){var M=A.nested[$[B]];S.add((M.id!==void 0?w.fromJSON:M.fields!==void 0?E.fromJSON:M.values!==void 0?r.fromJSON:M.methods!==void 0?p.fromJSON:h.fromJSON)($[B],M))}return A.extensions&&A.extensions.length&&(S.extensions=A.extensions),A.reserved&&A.reserved.length&&(S.reserved=A.reserved),A.group&&(S.group=!0),A.comment&&(S.comment=A.comment),S},E.prototype.toJSON=function(q){var A=h.prototype.toJSON.call(this,q),S=q?Boolean(q.keepComments):!1;return d.toObject(["options",A&&A.options||void 0,"oneofs",h.arrayToJSON(this.oneofsArray,q),"fields",h.arrayToJSON(this.fieldsArray.filter(function($){return!$.declaringField}),q)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",A&&A.nested||void 0,"comment",S?this.comment:void 0])},E.prototype.resolveAll=function(){for(var q=this.fieldsArray,A=0;A<q.length;)q[A++].resolve();var S=this.oneofsArray;for(A=0;A<S.length;)S[A++].resolve();return h.prototype.resolveAll.call(this)},E.prototype.get=function(q){return this.fields[q]||this.oneofs&&this.oneofs[q]||this.nested&&this.nested[q]||null},E.prototype.add=function(q){if(this.get(q.name))throw Error("duplicate name '"+q.name+"' in "+this);if(q instanceof w&&q.extend===void 0){if(this._fieldsById?this._fieldsById[q.id]:this.fieldsById[q.id])throw Error("duplicate id "+q.id+" in "+this);if(this.isReservedId(q.id))throw Error("id "+q.id+" is reserved in "+this);if(this.isReservedName(q.name))throw Error("name '"+q.name+"' is reserved in "+this);return q.parent&&q.parent.remove(q),this.fields[q.name]=q,q.message=this,q.onAdd(this),k(this)}return q instanceof m?(this.oneofs||(this.oneofs={}),this.oneofs[q.name]=q,q.onAdd(this),k(this)):h.prototype.add.call(this,q)},E.prototype.remove=function(q){if(q instanceof w&&q.extend===void 0){if(!this.fields||this.fields[q.name]!==q)throw Error(q+" is not a member of "+this);return delete this.fields[q.name],q.parent=null,q.onRemove(this),k(this)}if(q instanceof m){if(!this.oneofs||this.oneofs[q.name]!==q)throw Error(q+" is not a member of "+this);return delete this.oneofs[q.name],q.parent=null,q.onRemove(this),k(this)}return h.prototype.remove.call(this,q)},E.prototype.isReservedId=function(q){return h.isReservedId(this.reserved,q)},E.prototype.isReservedName=function(q){return h.isReservedName(this.reserved,q)},E.prototype.create=function(q){return new this.ctor(q)},E.prototype.setup=function(){for(var q=this.fullName,A=[],S=0;S<this.fieldsArray.length;++S)A.push(this._fieldsArray[S].resolve().resolvedType);this.encode=g(this)({Writer:_,types:A,util:d}),this.decode=O(this)({Reader:f,types:A,util:d}),this.verify=R(this)({types:A,util:d}),this.fromObject=L.fromObject(this)({types:A,util:d}),this.toObject=L.toObject(this)({types:A,util:d});var $=F[q];if($){var B=Object.create(this);B.fromObject=this.fromObject,this.fromObject=$.fromObject.bind(B),B.toObject=this.toObject,this.toObject=$.toObject.bind(B)}return this},E.prototype.encode=function(q,A){return this.setup().encode(q,A)},E.prototype.encodeDelimited=function(q,A){return this.encode(q,A&&A.len?A.fork():A).ldelim()},E.prototype.decode=function(q,A){return this.setup().decode(q,A)},E.prototype.decodeDelimited=function(q){return q instanceof f||(q=f.create(q)),this.decode(q,q.uint32())},E.prototype.verify=function(q){return this.setup().verify(q)},E.prototype.fromObject=function(q){return this.setup().fromObject(q)},E.prototype.toObject=function(q,A){return this.setup().toObject(q,A)},E.d=function(q){return function(S){d.decorateType(S,q)}},type}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1,root=_;var h=requireNamespace();((_.prototype=Object.create(h.prototype)).constructor=_).className="Root";var r=requireField(),m=require_enum(),w=requireOneof(),v=requireUtil(),p,n,f;function _(R){h.call(this,"",R),this.deferred=[],this.files=[]}_.fromJSON=function(L,F){return F||(F=new _),L.options&&F.setOptions(L.options),F.addJSON(L.nested)},_.prototype.resolvePath=v.path.resolve,_.prototype.fetch=v.fetch;function d(){}_.prototype.load=function R(L,F,E){typeof F=="function"&&(E=F,F=void 0);var k=this;if(!E)return v.asPromise(R,k,L,F);var N=E===d;function q(T,P){if(!!E){var x=E;if(E=null,N)throw T;x(T,P)}}function A(T){var P=T.lastIndexOf("google/protobuf/");if(P>-1){var x=T.substring(P);if(x in f)return x}return null}function S(T,P){try{if(v.isString(P)&&P.charAt(0)==="{"&&(P=JSON.parse(P)),!v.isString(P))k.setOptions(P.options).addJSON(P.nested);else{n.filename=T;var x=n(P,k,F),D,I=0;if(x.imports)for(;I<x.imports.length;++I)(D=A(x.imports[I])||k.resolvePath(T,x.imports[I]))&&$(D);if(x.weakImports)for(I=0;I<x.weakImports.length;++I)(D=A(x.weakImports[I])||k.resolvePath(T,x.weakImports[I]))&&$(D,!0)}}catch(W){q(W)}!N&&!B&&q(null,k)}function $(T,P){if(!(k.files.indexOf(T)>-1)){if(k.files.push(T),T in f){N?S(T,f[T]):(++B,setTimeout(function(){--B,S(T,f[T])}));return}if(N){var x;try{x=v.fs.readFileSync(T).toString("utf8")}catch(D){P||q(D);return}S(T,x)}else++B,k.fetch(T,function(D,I){if(--B,!!E){if(D){P?B||q(null,k):q(D);return}S(T,I)}})}}var B=0;v.isString(L)&&(L=[L]);for(var M=0,U;M<L.length;++M)(U=k.resolvePath("",L[M]))&&$(U);if(N)return k;B||q(null,k)},_.prototype.loadSync=function(L,F){if(!v.isNode)throw Error("not supported");return this.load(L,F,d)},_.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(L){return"'extend "+L.extend+"' in "+L.parent.fullName}).join(", "));return h.prototype.resolveAll.call(this)};var g=/^[A-Z]/;function O(R,L){var F=L.parent.lookup(L.extend);if(F){var E=new r(L.fullName,L.id,L.type,L.rule,void 0,L.options);return E.declaringField=L,L.extensionField=E,F.add(E),!0}return!1}return _.prototype._handleAdd=function(L){if(L instanceof r)L.extend!==void 0&&!L.extensionField&&(O(this,L)||this.deferred.push(L));else if(L instanceof m)g.test(L.name)&&(L.parent[L.name]=L.values);else if(!(L instanceof w)){if(L instanceof p)for(var F=0;F<this.deferred.length;)O(this,this.deferred[F])?this.deferred.splice(F,1):++F;for(var E=0;E<L.nestedArray.length;++E)this._handleAdd(L._nestedArray[E]);g.test(L.name)&&(L.parent[L.name]=L)}},_.prototype._handleRemove=function(L){if(L instanceof r){if(L.extend!==void 0)if(L.extensionField)L.extensionField.parent.remove(L.extensionField),L.extensionField=null;else{var F=this.deferred.indexOf(L);F>-1&&this.deferred.splice(F,1)}}else if(L instanceof m)g.test(L.name)&&delete L.parent[L.name];else if(L instanceof h){for(var E=0;E<L.nestedArray.length;++E)this._handleRemove(L._nestedArray[E]);g.test(L.name)&&delete L.parent[L.name]}},_._configure=function(R,L,F){p=R,n=L,f=F},root}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(h){var r=h.exports=requireMinimal(),m=roots,w,v;r.codegen=codegen_1,r.fetch=fetch_1,r.path=path,r.fs=r.inquire("fs"),r.toArray=function(g){if(g){for(var O=Object.keys(g),R=new Array(O.length),L=0;L<O.length;)R[L]=g[O[L++]];return R}return[]},r.toObject=function(g){for(var O={},R=0;R<g.length;){var L=g[R++],F=g[R++];F!==void 0&&(O[L]=F)}return O};var p=/\\/g,n=/"/g;r.isReserved=function(g){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(g)},r.safeProp=function(g){return!/^[$\w_]+$/.test(g)||r.isReserved(g)?'["'+g.replace(p,"\\\\").replace(n,'\\"')+'"]':"."+g},r.ucFirst=function(g){return g.charAt(0).toUpperCase()+g.substring(1)};var f=/_([a-z])/g;r.camelCase=function(g){return g.substring(0,1)+g.substring(1).replace(f,function(O,R){return R.toUpperCase()})},r.compareFieldsById=function(g,O){return g.id-O.id},r.decorateType=function(g,O){if(g.$type)return O&&g.$type.name!==O&&(r.decorateRoot.remove(g.$type),g.$type.name=O,r.decorateRoot.add(g.$type)),g.$type;w||(w=requireType());var R=new w(O||g.name);return r.decorateRoot.add(R),R.ctor=g,Object.defineProperty(g,"$type",{value:R,enumerable:!1}),Object.defineProperty(g.prototype,"$type",{value:R,enumerable:!1}),R};var _=0;r.decorateEnum=function(g){if(g.$type)return g.$type;v||(v=require_enum());var O=new v("Enum"+_++,g);return r.decorateRoot.add(O),Object.defineProperty(g,"$type",{value:O,enumerable:!1}),O},r.setProperty=function(g,O,R){function L(F,E,k){var N=E.shift();if(N==="__proto__")return F;if(E.length>0)F[N]=L(F[N]||{},E,k);else{var q=F[N];q&&(k=[].concat(q).concat(k)),F[N]=k}return F}if(typeof g!="object")throw TypeError("dst must be an object");if(!O)throw TypeError("path must be specified");return O=O.split("."),L(g,O,R)},Object.defineProperty(r,"decorateRoot",{get:function(){return m.decorated||(m.decorated=new(requireRoot()))}})}(util$1)),util$1.exports}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=m,m.className="ReflectionObject";var h=requireUtil(),r;function m(w,v){if(!h.isString(w))throw TypeError("name must be a string");if(v&&!h.isObject(v))throw TypeError("options must be an object");this.options=v,this.parsedOptions=null,this.name=w,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(m.prototype,{root:{get:function(){for(var w=this;w.parent!==null;)w=w.parent;return w}},fullName:{get:function(){for(var w=[this.name],v=this.parent;v;)w.unshift(v.name),v=v.parent;return w.join(".")}}}),m.prototype.toJSON=function(){throw Error()},m.prototype.onAdd=function(v){this.parent&&this.parent!==v&&this.parent.remove(this),this.parent=v,this.resolved=!1;var p=v.root;p instanceof r&&p._handleAdd(this)},m.prototype.onRemove=function(v){var p=v.root;p instanceof r&&p._handleRemove(this),this.parent=null,this.resolved=!1},m.prototype.resolve=function(){return this.resolved?this:(this.root instanceof r&&(this.resolved=!0),this)},m.prototype.getOption=function(v){if(this.options)return this.options[v]},m.prototype.setOption=function(v,p,n){return(!n||!this.options||this.options[v]===void 0)&&((this.options||(this.options={}))[v]=p),this},m.prototype.setParsedOption=function(v,p,n){this.parsedOptions||(this.parsedOptions=[]);var f=this.parsedOptions;if(n){var _=f.find(function(O){return Object.prototype.hasOwnProperty.call(O,v)});if(_){var d=_[v];h.setProperty(d,n,p)}else _={},_[v]=h.setProperty({},n,p),f.push(_)}else{var g={};g[v]=p,f.push(g)}return this},m.prototype.setOptions=function(v,p){if(v)for(var n=Object.keys(v),f=0;f<n.length;++f)this.setOption(n[f],v[n[f]],p);return this},m.prototype.toString=function(){var v=this.constructor.className,p=this.fullName;return p.length?v+" "+p:v},m._configure=function(w){r=w},object}var _enum,hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,_enum=w;var h=requireObject();((w.prototype=Object.create(h.prototype)).constructor=w).className="Enum";var r=requireNamespace(),m=requireUtil();function w(v,p,n,f,_){if(h.call(this,v,n),p&&typeof p!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=f,this.comments=_||{},this.reserved=void 0,p)for(var d=Object.keys(p),g=0;g<d.length;++g)typeof p[d[g]]=="number"&&(this.valuesById[this.values[d[g]]=p[d[g]]]=d[g])}return w.fromJSON=function(p,n){var f=new w(p,n.values,n.options,n.comment,n.comments);return f.reserved=n.reserved,f},w.prototype.toJSON=function(p){var n=p?Boolean(p.keepComments):!1;return m.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",n?this.comment:void 0,"comments",n?this.comments:void 0])},w.prototype.add=function(p,n,f){if(!m.isString(p))throw TypeError("name must be a string");if(!m.isInteger(n))throw TypeError("id must be an integer");if(this.values[p]!==void 0)throw Error("duplicate name '"+p+"' in "+this);if(this.isReservedId(n))throw Error("id "+n+" is reserved in "+this);if(this.isReservedName(p))throw Error("name '"+p+"' is reserved in "+this);if(this.valuesById[n]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+n+" in "+this);this.values[p]=n}else this.valuesById[this.values[p]=n]=p;return this.comments[p]=f||null,this},w.prototype.remove=function(p){if(!m.isString(p))throw TypeError("name must be a string");var n=this.values[p];if(n==null)throw Error("name '"+p+"' does not exist in "+this);return delete this.valuesById[n],delete this.values[p],delete this.comments[p],this},w.prototype.isReservedId=function(p){return r.isReservedId(this.reserved,p)},w.prototype.isReservedName=function(p){return r.isReservedName(this.reserved,p)},_enum}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=v;var h=require_enum(),r=requireTypes(),m=requireUtil();function w(p,n,f,_){return n.resolvedType.group?p("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",f,_,(n.id<<3|3)>>>0,(n.id<<3|4)>>>0):p("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",f,_,(n.id<<3|2)>>>0)}function v(p){for(var n=m.codegen(["m","w"],p.name+"$encode")("if(!w)")("w=Writer.create()"),f,_,d=p.fieldsArray.slice().sort(m.compareFieldsById),f=0;f<d.length;++f){var g=d[f].resolve(),O=p._fieldsArray.indexOf(g),R=g.resolvedType instanceof h?"int32":g.type,L=r.basic[R];_="m"+m.safeProp(g.name),g.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",_,g.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",_)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(g.id<<3|2)>>>0,8|r.mapKey[g.keyType],g.keyType),L===void 0?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",O,_):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|L,R,_),n("}")("}")):g.repeated?(n("if(%s!=null&&%s.length){",_,_),g.packed&&r.packed[R]!==void 0?n("w.uint32(%i).fork()",(g.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",_)("w.%s(%s[i])",R,_)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",_),L===void 0?w(n,g,O,_+"[i]"):n("w.uint32(%i).%s(%s[i])",(g.id<<3|L)>>>0,R,_)),n("}")):(g.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",_,g.name),L===void 0?w(n,g,O,_):n("w.uint32(%i).%s(%s)",(g.id<<3|L)>>>0,R,_))}return n("return w")}return encoder_1}(function(h){var r=h.exports=indexMinimal;r.build="light";function m(v,p,n){return typeof p=="function"?(n=p,p=new r.Root):p||(p=new r.Root),p.load(v,n)}r.load=m;function w(v,p){return p||(p=new r.Root),p.loadSync(v)}r.loadSync=w,r.encoder=requireEncoder(),r.decoder=requireDecoder(),r.verifier=requireVerifier(),r.converter=requireConverter(),r.ReflectionObject=requireObject(),r.Namespace=requireNamespace(),r.Root=requireRoot(),r.Enum=require_enum(),r.Type=requireType(),r.Field=requireField(),r.OneOf=requireOneof(),r.MapField=requireMapfield(),r.Service=requireService(),r.Method=requireMethod(),r.Message=message,r.wrappers=wrappers,r.types=requireTypes(),r.util=requireUtil(),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)})(indexLight),function(h){h.exports=indexLight.exports}(light);var l$1=getDefaultExportFromCjs(light.exports),t=function(h,r,m,w){var v=arguments.length,p=v<3?r:w===null?w=Object.getOwnPropertyDescriptor(r,m):w,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(h,r,m,w);else for(var f=h.length-1;f>=0;f--)(n=h[f])&&(p=(v<3?n(p):v>3?n(r,m,p):n(r,m))||p);return v>3&&p&&Object.defineProperty(r,m,p),p};const{Message,Field,Type}=l$1;let c=class extends Message{constructor(){super(...arguments),this.lastRead=new Long(0)}};t([Field.d(0,"string")],c.prototype,"url",void 0),t([Field.d(1,"int64")],c.prototype,"lastRead",void 0),c=t([Type.d()],c);let u=class extends Message{constructor(){super(...arguments),this.lastRead=new Long(0)}};t([Field.d(1,"string")],u.prototype,"url",void 0),t([Field.d(2,"int64")],u.prototype,"lastRead",void 0),u=t([Type.d()],u);let l=class extends Message{constructor(){super(...arguments),this.name="",this.sourceId=new Long(0)}};t([Field.d(0,"string")],l.prototype,"name",void 0),t([Field.d(1,"int64")],l.prototype,"sourceId",void 0),l=t([Type.d()],l);let y=class extends Message{constructor(){super(...arguments),this.name="",this.sourceId=new Long(0)}};t([Field.d(1,"string")],y.prototype,"name",void 0),t([Field.d(2,"int64")],y.prototype,"sourceId",void 0),y=t([Type.d()],y);let s=class extends Message{constructor(){super(...arguments),this.order=new Long(0),this.flags=new Long(0)}};t([Field.d(1,"string")],s.prototype,"name",void 0),t([Field.d(2,"int64")],s.prototype,"order",void 0),t([Field.d(100,"int64")],s.prototype,"flags",void 0),s=t([Type.d()],s);let i=class extends Message{constructor(){super(...arguments),this.read=!1,this.bookmark=!1,this.lastPageRead=0,this.dateFetch=new Long(0),this.dateUpload=new Long(0),this.chapterNumber=0,this.sourceOrder=0}};t([Field.d(1,"string")],i.prototype,"url",void 0),t([Field.d(2,"string")],i.prototype,"name",void 0),t([Field.d(3,"string","optional")],i.prototype,"scanlator",void 0),t([Field.d(4,"bool")],i.prototype,"read",void 0),t([Field.d(5,"bool")],i.prototype,"bookmark",void 0),t([Field.d(6,"int32")],i.prototype,"lastPageRead",void 0),t([Field.d(7,"int64")],i.prototype,"dateFetch",void 0),t([Field.d(8,"int64")],i.prototype,"dateUpload",void 0),t([Field.d(9,"float")],i.prototype,"chapterNumber",void 0),t([Field.d(10,"int32")],i.prototype,"sourceOrder",void 0),i=t([Type.d()],i);let o=class extends Message{constructor(){super(...arguments),this.libraryId=new Long(0),this.mediaIdInt=0,this.trackingUrl="",this.title="",this.lastChapterRead=0,this.totalChapters=0,this.score=0,this.status=0,this.startedReadingDate=new Long(0),this.finishedReadingDate=new Long(0),this.mediaId=new Long(0)}};t([Field.d(1,"int32")],o.prototype,"syncId",void 0),t([Field.d(2,"int64")],o.prototype,"libraryId",void 0),t([Field.d(3,"int32")],o.prototype,"mediaIdInt",void 0),t([Field.d(4,"string")],o.prototype,"trackingUrl",void 0),t([Field.d(5,"string")],o.prototype,"title",void 0),t([Field.d(6,"float")],o.prototype,"lastChapterRead",void 0),t([Field.d(7,"int32")],o.prototype,"totalChapters",void 0),t([Field.d(8,"float")],o.prototype,"score",void 0),t([Field.d(9,"int32")],o.prototype,"status",void 0),t([Field.d(10,"int64")],o.prototype,"startedReadingDate",void 0),t([Field.d(11,"int64")],o.prototype,"finishedReadingDate",void 0),t([Field.d(100,"int64")],o.prototype,"mediaId",void 0),o=t([Type.d()],o);let e=class extends Message{constructor(){super(...arguments),this.source=new Long(0),this.title="",this.genre=[],this.status=0,this.dateAdded=new Long(0),this.viewer=0,this.chapters=[],this.categories=[],this.tracking=[],this.favorite=!1,this.chapterFlags=0,this.brokenHistory=[],this.history=[]}};t([Field.d(1,"int64")],e.prototype,"source",void 0),t([Field.d(2,"string")],e.prototype,"url",void 0),t([Field.d(3,"string")],e.prototype,"title",void 0),t([Field.d(4,"string","optional")],e.prototype,"artist",void 0),t([Field.d(5,"string","optional")],e.prototype,"author",void 0),t([Field.d(6,"string","optional")],e.prototype,"description",void 0),t([Field.d(7,"string","repeated")],e.prototype,"genre",void 0),t([Field.d(8,"int32")],e.prototype,"status",void 0),t([Field.d(9,"string","optional")],e.prototype,"thumbnailUrl",void 0),t([Field.d(13,"int64")],e.prototype,"dateAdded",void 0),t([Field.d(14,"int32")],e.prototype,"viewer",void 0),t([Field.d(16,i,"repeated")],e.prototype,"chapters",void 0),t([Field.d(17,"int64","repeated")],e.prototype,"categories",void 0),t([Field.d(18,o,"repeated")],e.prototype,"tracking",void 0),t([Field.d(100,"bool")],e.prototype,"favorite",void 0),t([Field.d(101,"int32")],e.prototype,"chapterFlags",void 0),t([Field.d(102,c,"repeated")],e.prototype,"brokenHistory",void 0),t([Field.d(103,"int32","optional")],e.prototype,"viewerFlags",void 0),t([Field.d(104,u,"repeated")],e.prototype,"history",void 0),e=t([Type.d()],e);let a=class extends Message{constructor(){super(...arguments),this.backupManga=[],this.backupCategories=[],this.backupBrokenSources=[],this.backupSources=[]}};t([Field.d(1,e,"repeated")],a.prototype,"backupManga",void 0),t([Field.d(2,s,"repeated")],a.prototype,"backupCategories",void 0),t([Field.d(100,l,"repeated")],a.prototype,"backupBrokenSources",void 0),t([Field.d(101,y,"repeated")],a.prototype,"backupSources",void 0),a=t([Type.d()],a);var MangaViewer;(function(h){h[h.Default=0]="Default",h[h.RTL=1]="RTL",h[h.LTR=2]="LTR",h[h.Vertical=3]="Vertical",h[h.Scroll=4]="Scroll"})(MangaViewer||(MangaViewer={}));var MangaStatus;(function(h){h[h.Unknown=0]="Unknown",h[h.Ongoing=1]="Ongoing",h[h.Completed=2]="Completed",h[h.Cancelled=3]="Cancelled",h[h.Hiatus=4]="Hiatus"})(MangaStatus||(MangaStatus={}));class Converter{constructor(r){this.mangaViewer={1:MangaViewer.LTR,2:MangaViewer.RTL,3:MangaViewer.Vertical,4:MangaViewer.Scroll,5:MangaViewer.Scroll},this.mangaStatus={0:MangaStatus.Unknown,1:MangaStatus.Ongoing,2:MangaStatus.Completed,3:MangaStatus.Unknown,4:MangaStatus.Completed,5:MangaStatus.Cancelled,6:MangaStatus.Hiatus},this.tachiyomiSourceId=r.sourceId,this.aidokuSourceId=r.name.toLowerCase()}toAidokuManga(r){var m,w,v,p,n;return{id:r.url,author:(m=r.author)!==null&&m!==void 0?m:"",url:r.url,nsfw:0,tags:r.genre,title:r.title,sourceId:this.aidokuSourceId,desc:(w=r.description)!==null&&w!==void 0?w:"",cover:(v=r.thumbnailUrl)!==null&&v!==void 0?v:"",viewer:(p=this.mangaViewer[r.viewer])!==null&&p!==void 0?p:MangaViewer.Default,status:(n=this.mangaStatus[r.status])!==null&&n!==void 0?n:MangaStatus.Unknown}}toAidokuChapter(r,m){var w;return{sourceId:this.aidokuSourceId,mangaId:r.url,lang:"",id:m.url,scanlator:(w=m.scanlator)!==null&&w!==void 0?w:"",dateUploaded:new Date(m.dateUpload.toNumber()),chapter:m.chapterNumber,sourceOrder:m.sourceOrder}}}l$1.util.Long=Long,l$1.configure();const b={1:"myanimelist",2:"anilist"};function toAidoku(h){const r=new Date().toISOString().split("T")[0],m=a.decode(h),w=Object.fromEntries(m.backupCategories.map(f=>[f.order.toString(),f.name])),v=m.backupSources.map(f=>new Converter(f)),p=new Set,n={library:[],history:[],sources:[],manga:[],chapters:[],trackItems:[],categories:m.backupCategories.map(f=>f.name),date:new Date,name:`Converted Tachiyomi Backup ${r}`,version:"0.0.1"};return m.backupManga.forEach(f=>{const _=v.find(g=>g.tachiyomiSourceId.eq(f.source));if(_==null)return;p.add(_.aidokuSourceId);const d=_.toAidokuManga(f);n.manga.push(d),f.dateAdded.ne(0)&&n.library.push({mangaId:d.id,lastUpdated:new Date(0),categories:f.categories.map(g=>w[g.toString()]).filter(g=>g!==void 0),dateAdded:new Date(f.dateAdded.toNumber()),sourceId:_.aidokuSourceId,lastOpened:new Date(0)}),f.chapters.forEach(g=>{var O,R,L;const F=_.toAidokuChapter(f,g);n.chapters.push(F),n.history.push({progress:g.lastPageRead,mangaId:d.id,chapterId:F.id,completed:g.read,sourceId:_.aidokuSourceId,dateRead:new Date((L=(R=(O=[...f.history,...f.brokenHistory].find(E=>E.url===g.url))===null||O===void 0?void 0:O.lastRead)===null||R===void 0?void 0:R.toNumber())!==null&&L!==void 0?L:0)})}),n.trackItems.push(...f.tracking.filter(g=>g.syncId<=2).map(g=>({id:g.trackingUrl.split("/")[4],trackerId:b[g.syncId],mangaId:d.id,sourceId:_.aidokuSourceId,title:d.title})))}),n.sources=[...p],{backup:n,dateString:r,missingSources:[]}}return exports.toAidoku=toAidoku,Object.defineProperty(exports,"__esModule",{value:!0}),exports}({});
